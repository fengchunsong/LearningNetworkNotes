1. zxj ok:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 42120
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 42122
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    58,705,088,743      instructions              #    0.83  insn per cycle           (75.12%)
           766,205      cs                                                          
    70,722,029,050      cycles                                                        (87.93%)
    30,258,808,043      L1-dcache-loads                                               (87.19%)
     1,933,859,332      L1-dcache-load-misses     #    6.39% of all L1-dcache hits    (87.91%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    20,466,084,610      L1-icache-loads                                               (87.18%)
       896,858,382      L1-icache-load-misses                                         (88.00%)
   <not supported>      dTLB-loads                                                  
       162,096,478      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.73%)
   <not supported>      iTLB-loads                                                  
        62,520,444      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.99%)

     148.087777420 seconds time elapsed



2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 42120 connected with 192.168.12.12 port 5001
[  104.067809] random: crng init done
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.38 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    15,040,055,796      instructions              #    0.85  insns per cycle          (74.41%)
            37,965      cs                                                          
    17,760,109,778      cycles                                                        (87.18%)
     9,055,197,727      L1-dcache-loads                                               (87.08%)
       378,603,827      L1-dcache-load-misses     #    4.18% of all L1-dcache hits    (87.93%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,206,495,816      L1-icache-loads                                               (87.49%)
       163,983,648      L1-icache-load-misses                                         (87.58%)
   <not supported>      dTLB-loads               
        35,028,346      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.14%)
   <not supported>      iTLB-loads               
        11,057,747      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.43%)

      30.030422020 seconds time elapsed
--------------
(reverse-i-search)`q':  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat 









    bw  =  3.34 MB/sec
tcp_bw:
    bw  =  6.73 MB/sec
tcp_bw:
    bw  =  13.3 MB/sec
tcp_bw:
    bw  =  25.8 MB/sec
tcp_bw:
    bw  =  50.4 MB/sec
tcp_bw:
    bw  =  98.6 MB/sec
tcp_bw:
    bw  =  183 MB/sec
tcp_bw:
    bw  =  313 MB/sec
tcp_bw:
    bw  =  492 MB/sec
tcp_bw:
    bw  =  655 MB/sec
tcp_bw:
    bw  =  871 MB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  65.3 us
tcp_lat:
    latency  =  66.3 us
tcp_lat:
    latency  =  70.7 us
tcp_lat:
    latency  =  80 us
tcp_lat:
    latency  =  90.8 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    68,441,364,703      instructions              #    1.03  insn per cycle           (74.35%)
           488,393      cs                                                          
    66,733,191,495      cycles                                                        (86.56%)
    36,891,499,401      L1-dcache-loads                                               (87.48%)
       534,073,026      L1-dcache-load-misses     #    1.45% of all L1-dcache hits    (87.56%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    27,607,668,473      L1-icache-loads                                               (88.18%)
       829,470,654      L1-icache-load-misses                                         (87.58%)
   <not supported>      dTLB-loads                                                  
       342,054,260      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.35%)
   <not supported>      iTLB-loads                                                  
        42,186,813      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.51%)

      64.214466420 seconds time elapsed


 Performance counter stats for 'qperf':

    78,337,554,841      instructions              #    0.98  insns per cycle          (74.88%)
           582,410      cs                                                          
    79,679,956,454      cycles                                                        (87.12%)
    39,366,021,195      L1-dcache-loads                                               (87.49%)
       674,744,966      L1-dcache-load-misses     #    1.71% of all L1-dcache hits    (87.64%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    31,705,759,482      L1-icache-loads                                               (87.80%)
     1,199,750,158      L1-icache-load-misses                                         (87.71%)                                                                     netperf -H 192.168.12 supported>      dTLB-loads                                                netperf -H 192.168

[root@CentOS ~]# perf stat -d -d -e instructions, netperf -H 192.168.12.12 -l 60 


Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.49   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    34,631,519,195      instructions              #    0.87  insns per cycle          (75.63%)
            41,313      cs                                                          
    39,851,790,957      cycles                                                        (87.84%)
    20,711,014,673      L1-dcache-loads                                               (87.60%)
       838,280,817      L1-dcache-load-misses     #    4.05% of all L1-dcache hits    (87.31%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,754,924,990      L1-icache-loads                                               (87.35%)
       331,018,925      L1-icache-load-misses                                         (87.25%)
   <not supported>      dTLB-loads               
       125,273,940      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.44%)
   <not supported>      iTLB-loads               
        32,942,714      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.45%)

      60.010681600 seconds time elapsed

==================================================================
[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001-d -d -e instructions,cs,cycles   netperf -H 192
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------


[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 43786

[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 43788
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    50,814,145,389      instructions              #    0.81  insns per cycle          (74.95%)
           940,729      cs                                                          
    62,746,052,300      cycles                                                        (87.84%)
    26,593,742,132      L1-dcache-loads                                               (87.55%)
     1,985,555,324      L1-dcache-load-misses     #    7.47% of all L1-dcache hits    (87.03%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    18,066,571,183      L1-icache-loads                                               (87.60%)
       848,799,958      L1-icache-load-misses                                         (88.07%)
   <not supported>      dTLB-loads               
       164,741,302      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.67%)
   <not supported>      iTLB-loads               
        51,612,378      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.18%)

      90.633770160 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------,cycles iperf -c 192.1
Client connecting to 192.168.12.11, TCP port 5001uctions,cs,cycles iperf -c 192.16
TCP window size: 85.0 KByte (default)-d -e instructions,cs,cycles iperf -c 192.16
------------------------------------------------------------
[  3] local 192.168.12.12 port 43786 connected with 192.168.12.11 port 5001




[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,714,931,044      instructions              #    0.90  insn per cycle           (74.20%)
            38,797      cs                                                          
    16,289,898,322      cycles                                                        (87.24%)
     8,906,435,632      L1-dcache-loads                                               (87.31%)
       365,874,112      L1-dcache-load-misses     #    4.11% of all L1-dcache hits    (87.85%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,081,959,436      L1-icache-loads                                               (87.91%)
       150,812,924      L1-icache-load-misses                                         (88.04%)
   <not supported>      dTLB-loads                                                  
        35,680,825      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.95%)
   <not supported>      iTLB-loads                                                  
         7,968,577      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.80%)

      30.035182400 seconds time elapsed

----------------------------------------------------------------

    bw  =  1.69 MB/sec
tcp_bw:
    bw  =  3.6 MB/sec
tcp_bw:
    bw  =  7.27 MB/sec
tcp_bw:
    bw  =  14.5 MB/sec
tcp_bw:
    bw  =  27.4 MB/sec
tcp_bw:
    bw  =  54.8 MB/sec
tcp_bw:
    bw  =  103 MB/sec
tcp_bw:
    bw  =  203 MB/sec
tcp_bw:
    bw  =  347 MB/sec
tcp_bw:
    bw  =  526 MB/sec
tcp_bw:
    bw  =  797 MB/sec
tcp_bw:
    bw  =  843 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  65 us
tcp_lat:
    latency  =  66.1 us
tcp_lat:
    latency  =  69.6 us
tcp_lat:
    latency  =  79.4 us
tcp_lat:
    latency  =  91.7 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    68,084,001,973      instructions              #    1.02  insn per cycle           (75.16%)
           488,376      cs                                                          
    66,835,116,684      cycles                                                        (87.65%)
    37,183,919,485      L1-dcache-loads                                               (87.37%)
       479,829,062      L1-dcache-load-misses     #    1.29% of all L1-dcache hits    (87.49%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,579,004,810      L1-icache-loads                                               (87.54%)
       690,973,976      L1-icache-load-misses                                         (87.76%)
   <not supported>      dTLB-loads                                                  
       444,146,088      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.26%)
   <not supported>      iTLB-loads                                                  
        29,121,024      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.42%)

      64.225518560 seconds time elapsed

----
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf


qperf: Interrupt

 Performance counter stats for 'qperf':

    74,177,355,606      instructions              #    0.96  insns per cycle          (74.91%)
           628,842      cs                                                          
    77,227,446,258      cycles                                                        (87.21%)
    38,187,547,126      L1-dcache-loads                                               (87.30%)
       673,050,528      L1-dcache-load-misses     #    1.76% of all L1-dcache hits    (87.70%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    31,749,949,034      L1-icache-loads                                               (87.37%)
       860,128,927      L1-icache-load-misses                                         (87.42%)
   <not supported>      dTLB-loads               
       224,632,199      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.47%)
   <not supported>      iTLB-loads               
        73,487,803      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.04%)

     106.071039940 seconds time elapsed

-----------
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.61   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    34,103,019,198      instructions              #    0.92  insns per cycle          (74.54%)
            43,188      cs                                                          
    37,145,519,656      cycles                                                        (87.33%)
    20,401,929,429      L1-dcache-loads                                               (87.62%)
       822,442,305      L1-dcache-load-misses     #    4.03% of all L1-dcache hits    (87.65%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,498,264,963      L1-icache-loads                                               (87.38%)
       343,310,187      L1-icache-load-misses                                         (87.69%)
   <not supported>      dTLB-loads               
       143,370,744      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.60%)
   <not supported>      iTLB-loads               
        22,740,963      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.53%)

      60.011079960 seconds time elapsed



================================================================
2. est1-1470:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k6
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 48662
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  25.1 GBytes  7.19 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    14,519,842,806      instructions              #    0.21  insn per cycle           (74.98%)
            15,260      cs                                                          
    70,724,727,173      cycles                                                        (87.48%)
     7,802,830,649      L1-dcache-loads                                               (87.49%)
       776,370,958      L1-dcache-load-misses     #    9.95% of all L1-dcache hits    (87.49%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,113,135,764      L1-icache-loads                                               (87.51%)
        71,949,177      L1-icache-load-misses                                         (87.52%)
   <not supported>      dTLB-loads                                                  
        43,050,267      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.52%)
   <not supported>      iTLB-loads                                                  
         1,163,863      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.50%)

      44.062998780 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------s,cs,cycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
Client connecting to 192.168.12.11, TCP port 5001nstructions,cs,cycles iperf -s -w 256k
TCP window size: 85.0 KByte (default) -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------s,cycles iperf -s -w 256k
[  3] local 192.168.12.12 port 38018 connected with 192.168.12.11 port 5001s -w 256k
[ ID] Interval       Transfer     Bandwidth instructions,cs,cycles iperf -s -w 256k
[  3]  0.0- 1.0 sec   967 MBytes  8.11 Gbits/secuctions,cs,cycles iperf -s -w 256k
kreverse-i-search)`i': perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k


[  3]  1.0- 2.0 sec   849 MBytes  7.12 Gbits/sec
[  3]  2.0- 3.0 sec   849 MBytes  7.12 Gbits/sec
[  3]  3.0- 4.0 sec   850 MBytes  7.13 Gbits/sec
[  3]  4.0- 5.0 sec   940 MBytes  7.89 Gbits/sec
[  3]  5.0- 6.0 sec   851 MBytes  7.14 Gbits/sec
[  3]  6.0- 7.0 sec   852 MBytes  7.15 Gbits/sec
[  3]  7.0- 8.0 sec   850 MBytes  7.13 Gbits/sec
[  3]  8.0- 9.0 sec   851 MBytes  7.14 Gbits/sec
[  3]  9.0-10.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 10.0-11.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 11.0-12.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 12.0-13.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 13.0-14.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 14.0-15.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 15.0-16.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 16.0-17.0 sec   935 MBytes  7.85 Gbits/sec
[  3] 17.0-18.0 sec   852 MBytes  7.14 Gbits/sec
[  3] 18.0-19.0 sec   852 MBytes  7.14 Gbits/sec
[  3] 19.0-20.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 20.0-21.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 21.0-22.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 22.0-23.0 sec   850 MBytes  7.13 Gbits/sec
[  3] 23.0-24.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 24.0-25.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 25.0-26.0 sec   850 MBytes  7.13 Gbits/sec
[  3] 26.0-27.0 sec   852 MBytes  7.14 Gbits/sec
[  3] 27.0-28.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 28.0-29.0 sec   853 MBytes  7.16 Gbits/sec
[  3] 29.0-30.0 sec   854 MBytes  7.16 Gbits/sec
[  3]  0.0-30.0 sec  25.2 GBytes  7.22 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

     9,924,312,366      instructions              #    0.89  insn per cycle           (74.87%)
            52,268      cs                                                          
    11,098,458,161      cycles                                                        (86.83%)
     6,257,383,470      L1-dcache-loads                                               (87.51%)
       231,246,730      L1-dcache-load-misses     #    3.70% of all L1-dcache hits    (87.44%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     3,297,556,544      L1-icache-loads                                               (87.47%)
        85,524,638      L1-icache-load-misses                                         (87.09%)
   <not supported>      dTLB-loads                                                  
        12,591,892      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.53%)
   <not supported>      iTLB-loads                                                  
         1,345,894      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.42%)

      30.029570620 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:entOS ~]#    p': perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_s
size:1:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s


    bw  =  1.75 MB/sec
tcp_bw:
    bw  =  3.55 MB/sec
tcp_bw:
    bw  =  7.05 MB/sec
tcp_bw:
    bw  =  13.6 MB/sec
tcp_bw:
    bw  =  27.7 MB/sec
tcp_bw:
    bw  =  51.5 MB/sec
tcp_bw:
    bw  =  99.2 MB/sec
tcp_bw:
    bw  =  190 MB/sec
tcp_bw:
    bw  =  320 MB/sec
tcp_bw:
    bw  =  473 MB/sec
tcp_bw:
    bw  =  617 MB/sec
tcp_bw:
    bw  =  945 MB/sec
tcp_bw:
    bw  =  807 MB/sec
tcp_bw:
    bw  =  1.13 GB/sec
tcp_bw:
    bw  =  1.11 GB/sec
tcp_bw:
    bw  =  1.13 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  67 us
tcp_lat:
    latency  =  67.7 us
tcp_lat:
    latency  =  69.2 us
tcp_lat:
    latency  =  75.9 us
tcp_lat:
    latency  =  109 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    66,129,431,580      instructions              #    1.01  insn per cycle           (74.78%)
           486,109      cs                                                          
    65,664,051,872      cycles                                                        (87.47%)
    36,101,086,212      L1-dcache-loads                                               (87.33%)
       413,360,368      L1-dcache-load-misses     #    1.15% of all L1-dcache hits    (87.64%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    27,777,754,848      L1-icache-loads                                               (87.50%)
       772,764,393      L1-icache-load-misses                                         (87.58%)
   <not supported>      dTLB-loads                                                  
       113,353,132      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.44%)
   <not supported>      iTLB-loads                                                  
         5,775,044      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.73%)

      64.423845660 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           204,812      instructions              #    0.05  insn per cycle           (80.46%)
                 2      cs                                                          
         3,824,741      cycles                                                        (90.05%)
           471,496      L1-dcache-loads                                             
            19,323      L1-dcache-load-misses     #    4.10% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           519,194      L1-icache-loads                                             
            21,771      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             3,524      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
               913      iTLB-load-misses          #    0.00% of all iTLB cache hits   (70.56%)

       0.003191920 seconds time elapsed

[root@CentOS ~]# 

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
2.168.12.12 -l 60)`i': perf stat -d -d -e instructions,cs,cycles   netperf -H 192
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 48662 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec   971 MBytes  8.15 Gbits/sec
[  3]  1.0- 2.0 sec   848 MBytes  7.11 Gbits/sec
[  3]  2.0- 3.0 sec   846 MBytes  7.10 Gbits/sec
[  3]  3.0- 4.0 sec   846 MBytes  7.10 Gbits/sec
[  3]  4.0- 5.0 sec   847 MBytes  7.11 Gbits/sec
[  3]  5.0- 6.0 sec   846 MBytes  7.10 Gbits/sec
[  3]  6.0- 7.0 sec   847 MBytes  7.11 Gbits/sec
[  3]  7.0- 8.0 sec   848 MBytes  7.11 Gbits/sec
[  3]  8.0- 9.0 sec   847 MBytes  7.10 Gbits/sec
[  3]  9.0-10.0 sec   849 MBytes  7.12 Gbits/sec
[  3] 10.0-11.0 sec   848 MBytes  7.11 Gbits/sec
[  3] 11.0-12.0 sec   848 MBytes  7.11 Gbits/sec
[  3] 12.0-13.0 sec   846 MBytes  7.10 Gbits/sec
[  3] 13.0-14.0 sec   848 MBytes  7.11 Gbits/sec
[  3] 14.0-15.0 sec   848 MBytes  7.11 Gbits/sec
[  3] 15.0-16.0 sec   848 MBytes  7.11 Gbits/sec
[  3] 16.0-17.0 sec   848 MBytes  7.12 Gbits/sec
[  3] 17.0-18.0 sec   847 MBytes  7.11 Gbits/sec
[  3] 18.0-19.0 sec   849 MBytes  7.12 Gbits/sec
[  3] 19.0-20.0 sec   847 MBytes  7.11 Gbits/sec
[  3] 20.0-21.0 sec   948 MBytes  7.95 Gbits/sec
[  3] 21.0-22.0 sec   855 MBytes  7.17 Gbits/sec
[  3] 22.0-23.0 sec   856 MBytes  7.18 Gbits/sec
[  3] 23.0-24.0 sec   855 MBytes  7.17 Gbits/sec
[  3] 24.0-25.0 sec   856 MBytes  7.18 Gbits/sec
[  3] 25.0-26.0 sec   854 MBytes  7.16 Gbits/sec
[  3] 26.0-27.0 sec   855 MBytes  7.17 Gbits/sec
[  3] 27.0-28.0 sec   855 MBytes  7.17 Gbits/sec
[  3] 28.0-29.0 sec   853 MBytes  7.16 Gbits/sec
[  3] 29.0-30.0 sec   856 MBytes  7.18 Gbits/sec
[  3]  0.0-30.0 sec  25.1 GBytes  7.19 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

     9,859,232,007      instructions              #    0.90  insns per cycle          (75.06%)
            49,913      cs                                                          
    10,989,864,860      cycles                                                        (87.04%)
     6,213,162,883      L1-dcache-loads                                               (87.76%)
       232,248,124      L1-dcache-load-misses     #    3.74% of all L1-dcache hits    (87.64%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     3,262,621,850      L1-icache-loads                                               (87.75%)
        78,631,850      L1-icache-load-misses                                         (87.74%)
   <not supported>      dTLB-loads               
        12,244,313      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.22%)
   <not supported>      iTLB-loads               
         1,151,217      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.87%)
[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001 stat -d -d -e instructions,cs,cycles iperf -c 19
TCP window size:  448 KByte (WARNING: requested  256 KByte),cs,cycles iperf -c 192
------------------------------------------------------------s,cycles iperf -c 192.
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 38018c 192.1
[ ID] Interval       Transfer     Bandwidth instructions,cs,cycles iperf -c 192.16
[  4]  0.0-30.0 sec  25.2 GBytes  7.22 Gbits/secuctions,cs,cycles iperf -c 192.168
.12.12 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168
 Performance counter stats for 'iperf -s -w 256k':

    14,887,810,668      instructions              #    0.21  insns per cycle          (75.08%)
            15,797      cs                                                          
    70,660,941,619      cycles                                                        (87.54%)
     7,982,592,163      L1-dcache-loads                                               (87.47%)
       778,696,925      L1-dcache-load-misses     #    9.75% of all L1-dcache hits    (87.49%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,230,571,026      L1-icache-loads                                               (87.47%)
        75,003,233      L1-icache-load-misses                                         (87.50%)
   <not supported>      dTLB-loads               
        44,069,596      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.49%)
   <not supported>      iTLB-loads               
         1,174,418      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.50%)

      50.835479220 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]#   ':  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperfiperf -s -w 256
qperf: Interrupt

 Performance counter stats for 'qperf':

         1,406,645      instructions              #    0.17  insns per cycle          (31.02%)
                 6      cs                                                          
         8,431,613      cycles                                                        (71.83%)
           724,520      L1-dcache-loads                                             
            32,806      L1-dcache-load-misses     #    4.53% of all L1-dcache hits  
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
           887,240      L1-icache-loads                                             
            42,340      L1-icache-load-misses                                       
   <not supported>      dTLB-loads               
             6,460      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads               
             1,157      iTLB-load-misses          #    0.00% of all iTLB cache hits   (80.23%)

       4.343663460 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    72,287,471,695      instructions              #    0.86  insns per cycle          (74.98%)
           566,657      cs                                                          
    83,580,576,029      cycles                                                        (87.34%)
    37,208,091,549      L1-dcache-loads                                               (87.59%)
       642,200,772      L1-dcache-load-misses     #    1.73% of all L1-dcache hits    (87.34%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    30,189,059,931      L1-icache-loads                                               (87.60%)
       800,779,848      L1-icache-load-misses                                         (87.41%)
   <not supported>      dTLB-loads               
       142,579,016      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.64%)
   <not supported>      iTLB-loads               
         8,210,973      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.49%)

      76.779598520 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
192.168.12.12 -l 60net': perf stat -d -d -e instructions,cs,cycles   netperf -H 1


Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.01    7846.82   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    26,411,756,561      instructions              #    0.89  insns per cycle          (74.93%)
            34,784      cs                                                          
    29,516,487,459      cycles                                                        (87.45%)
    16,205,104,764      L1-dcache-loads                                               (87.62%)
       484,733,931      L1-dcache-load-misses     #    2.99% of all L1-dcache hits    (87.64%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     9,451,306,613      L1-icache-loads                                               (87.60%)
       203,556,318      L1-icache-load-misses                                         (87.61%)
   <not supported>      dTLB-loads               
        36,121,136      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.25%)
   <not supported>      iTLB-loads               
         2,002,207      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.35%)

      60.015643160 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 



================================================================

3. est1471-2294:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11

------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 39276 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    15,316,416,136      instructions              #    0.93  insn per cycle           (74.82%)
            60,161      cs                                                          
    16,420,380,753      cycles                                                        (87.56%)
     9,059,340,117      L1-dcache-loads                                               (88.38%)
       353,924,469      L1-dcache-load-misses     #    3.91% of all L1-dcache hits    (86.53%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,297,863,233      L1-icache-loads                                               (88.00%)
       174,153,890      L1-icache-load-misses                                         (87.56%)
   <not supported>      dTLB-loads                                                  
        38,469,235      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.24%)
   <not supported>      iTLB-loads                                                  
         9,193,407      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.83%)

      30.030709520 seconds time elapsed

1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 39278 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    15,346,426,893      instructions              #    0.94  insn per cycle           (75.82%)
            60,952      cs                                                          
    16,401,026,798      cycles                                                        (87.79%)
     9,049,335,261      L1-dcache-loads                                               (87.23%)
       356,404,423      L1-dcache-load-misses     #    3.94% of all L1-dcache hits    (87.32%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,275,474,857      L1-icache-loads                                               (86.89%)
       173,294,317      L1-icache-load-misses                                         (86.77%)
   <not supported>      dTLB-loads                                                  
        36,298,609      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.55%)
   <not supported>      iTLB-loads                                                  
         9,137,775      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.53%)

      30.029004600 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001 stat -d -d -e instructions,cs,cycles iperf -c 19
TCP window size:  448 KByte (WARNING: requested  256 KByte),cs,cycles iperf -c 192
------------------------------------------------------------s,cycles iperf -c 192.
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 40442c 192.1
[ ID] Interval       Transfer     Bandwidth instructions,cs,cycles iperf -c 192.16
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/secuctions,cs,cycles iperf -c 192.168
8.12.11 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168


 Performance counter stats for 'iperf -s -w 256k':

    36,018,768,585      instructions              #    0.92  insn per cycle           (74.64%)
           329,902      cs                                                          
    39,146,001,644      cycles                                                        (87.26%)
    17,074,387,539      L1-dcache-loads                                               (87.97%)
       977,477,334      L1-dcache-load-misses     #    5.72% of all L1-dcache hits    (87.48%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    12,720,513,945      L1-icache-loads                                               (87.60%)
       458,270,697      L1-icache-load-misses                                         (87.73%)
   <not supported>      dTLB-loads                                                  
        96,450,868      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.56%)
   <not supported>      iTLB-loads                                                  
        23,030,009      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.11%)

      45.032710640 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s

    bw  =  1.59 MB/sec
tcp_bw:
    bw  =  3.23 MB/sec
tcp_bw:
    bw  =  6.42 MB/sec
tcp_bw:
    bw  =  12.3 MB/sec
tcp_bw:
    bw  =  24.8 MB/sec
tcp_bw:
    bw  =  46.6 MB/sec
tcp_bw:
    bw  =  92.2 MB/sec
tcp_bw:
    bw  =  174 MB/sec
tcp_bw:
    bw  =  303 MB/sec
tcp_bw:
    bw  =  453 MB/sec
tcp_bw:
    bw  =  686 MB/sec
tcp_bw:
    bw  =  774 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66 us
tcp_lat:
    latency  =  67.1 us
tcp_lat:
    latency  =  72.6 us
tcp_lat:
    latency  =  79.5 us
tcp_lat:
    latency  =  110 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    69,145,804,582      instructions              #    1.02  insn per cycle           (75.20%)
           483,553      cs                                                          
    67,613,625,184      cycles                                                        (87.77%)
    35,799,231,994      L1-dcache-loads                                               (87.12%)
       547,333,467      L1-dcache-load-misses     #    1.53% of all L1-dcache hits    (87.80%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    29,141,779,282      L1-icache-loads                                               (87.46%)
       745,827,398      L1-icache-load-misses                                         (87.43%)
   <not supported>      dTLB-loads                                                  
       634,612,946      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.27%)
   <not supported>      iTLB-loads                                                  
        38,057,368      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.72%)

      64.244032500 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

         1,207,187      instructions              #    0.24  insn per cycle         
                 3      cs                                                          
         5,093,067      cycles                                                      
           529,268      L1-dcache-loads                                             
            21,779      L1-dcache-load-misses     #    4.11% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           775,530      L1-icache-loads                                             
            27,689      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             6,161      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
     <not counted>      iTLB-load-misses                                              (0.00%)

       0.002933240 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 

[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k56k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 39276
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 39278
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    71,456,837,259      instructions              #    0.91  insns per cycle          (74.71%)
           665,123      cs                                                          
    78,136,413,243      cycles                                                        (87.32%)
    33,937,162,020      L1-dcache-loads                                               (87.39%)
     1,955,178,277      L1-dcache-load-misses     #    5.76% of all L1-dcache hits    (87.79%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    25,072,736,516      L1-icache-loads                                               (87.55%)
       912,163,317      L1-icache-load-misses                                         (87.45%)
   <not supported>      dTLB-loads               
       188,087,710      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.58%)
   <not supported>      iTLB-loads               
        46,156,187      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.54%)

     123.970273520 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------s,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
Client connecting to 192.168.12.12, TCP port 5001instructions,cs,cycles iperf -s -
TCP window size: 85.0 KByte (default)t -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------cs,cycles iperf -s -w 256k
[  3] local 192.168.12.11 port 40442 connected with 192.168.12.12 port 5001-s -w 256k
[root@CentOS ~]#     e':  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
[root@CentOS ~]#    p':  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
6keverse-i-search)`i':  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec

[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    15,337,545,338      instructions              #    0.94  insns per cycle          (76.92%)
            62,883      cs                                                          
    16,307,975,585      cycles                                                        (87.87%)
     9,044,386,060      L1-dcache-loads                                               (87.64%)
       346,906,476      L1-dcache-load-misses     #    3.84% of all L1-dcache hits    (87.96%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,274,344,101      L1-icache-loads                                               (87.83%)
       171,281,911      L1-icache-load-misses                                         (87.00%)
   <not supported>      dTLB-loads               
        38,721,323      dTLB-load-misses          #    0.00% of all dTLB cache hits   (85.86%)
   <not supported>      iTLB-loads               
         9,274,811      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.87%)

      30.031615760 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    80,330,376,927      instructions              #    1.00  insns per cycle          (74.91%)
           584,610      cs                                                          
    80,097,010,350      cycles                                                        (87.27%)
    39,002,341,886      L1-dcache-loads                                               (87.63%)
       718,035,155      L1-dcache-load-misses     #    1.84% of all L1-dcache hits    (87.57%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    33,537,098,299      L1-icache-loads                                               (87.69%)
       913,154,110      L1-icache-load-misses                                         (87.49%)
   <not supported>      dTLB-loads               
       488,753,251      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.77%)
   <not supported>      iTLB-loads               
        50,662,976      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.18%)

      74.375673200 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
92.168.12.12 -l 60`et': perf stat -d -d -e instructions,cs,cycles   netperf -H 19


Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.60   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    36,502,055,171      instructions              #    0.91  insns per cycle          (74.79%)
            40,557      cs                                                          
    40,053,405,123      cycles                                                        (87.16%)
    21,220,794,317      L1-dcache-loads                                               (87.99%)
       915,401,509      L1-dcache-load-misses     #    4.31% of all L1-dcache hits    (87.38%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    13,693,223,179      L1-icache-loads                                               (88.03%)
       398,181,000      L1-icache-load-misses                                         (86.90%)
   <not supported>      dTLB-loads               
       171,091,274      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.11%)
   <not supported>      iTLB-loads               
        22,236,617      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.82%)

      60.024846020 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 




================================================================
2.1 est1-704:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 34596
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  24.5 GBytes  7.01 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    14,713,110,453      instructions              #    0.22  insn per cycle           (74.99%)
            89,626      cs                                                          
    66,297,593,426      cycles                                                        (87.50%)
     7,899,352,919      L1-dcache-loads                                               (87.55%)
       762,978,891      L1-dcache-load-misses     #    9.66% of all L1-dcache hits    (87.63%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,255,345,530      L1-icache-loads                                               (87.41%)
       108,511,552      L1-icache-load-misses                                         (87.41%)
   <not supported>      dTLB-loads                                                  
        46,676,038      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.55%)
   <not supported>      iTLB-loads                                                  
           987,338      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.48%)

      47.184129260 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
connect failed: Connection refusedstat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
[root@CentOS ~]#         ': perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':iperf -s -w 256k
[root@CentOS ~]#        -': perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
           296,562      instructions              #    0.09  insn per cycle         k
                 5      cs                                                          
         3,378,904      cycles                                                      
         1,095,140      L1-dcache-loads                                             
            34,270      L1-dcache-load-misses     #    3.13% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
         1,505,989      L1-icache-loads                                             
            31,218      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             4,962      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
               941      iTLB-load-misses          #    0.00% of all iTLB cache hits   (83.28%)

       0.002754680 seconds time elapsed

[root@CentOS ~]# 
1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 54746 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec   941 MBytes  7.90 Gbits/sec
[  3]  1.0- 2.0 sec   819 MBytes  6.87 Gbits/sec
[  3]  2.0- 3.0 sec   819 MBytes  6.87 Gbits/sec

[  3]  3.0- 4.0 sec   908 MBytes  7.61 Gbits/sec
[  3]  4.0- 5.0 sec   821 MBytes  6.89 Gbits/sec
[  3]  5.0- 6.0 sec   821 MBytes  6.89 Gbits/sec
[  3]  6.0- 7.0 sec   822 MBytes  6.89 Gbits/sec
[  3]  7.0- 8.0 sec   822 MBytes  6.90 Gbits/sec
[  3]  8.0- 9.0 sec   822 MBytes  6.90 Gbits/sec
[  3]  9.0-10.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 10.0-11.0 sec   823 MBytes  6.90 Gbits/sec
[  3] 11.0-12.0 sec   872 MBytes  7.31 Gbits/sec
[  3] 12.0-13.0 sec   855 MBytes  7.17 Gbits/sec
[  3] 13.0-14.0 sec   823 MBytes  6.90 Gbits/sec
[  3] 14.0-15.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 15.0-16.0 sec   822 MBytes  6.89 Gbits/sec
[  3] 16.0-17.0 sec   824 MBytes  6.91 Gbits/sec
[  3] 17.0-18.0 sec   823 MBytes  6.90 Gbits/sec
[  3] 18.0-19.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 19.0-20.0 sec   821 MBytes  6.89 Gbits/sec
[  3] 20.0-21.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 21.0-22.0 sec   821 MBytes  6.89 Gbits/sec
[  3] 22.0-23.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 23.0-24.0 sec   823 MBytes  6.91 Gbits/sec
[  3] 24.0-25.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 25.0-26.0 sec   823 MBytes  6.91 Gbits/sec
[  3] 26.0-27.0 sec   823 MBytes  6.90 Gbits/sec
[  3] 27.0-28.0 sec   824 MBytes  6.91 Gbits/sec
[  3] 28.0-29.0 sec   823 MBytes  6.90 Gbits/sec
[  3] 29.0-30.0 sec   823 MBytes  6.90 Gbits/sec
[  3]  0.0-30.0 sec  24.4 GBytes  6.98 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

     9,518,707,588      instructions              #    0.91  insn per cycle           (75.07%)
            49,457      cs                                                          
    10,436,095,464      cycles                                                        (87.55%)
     6,005,712,034      L1-dcache-loads                                               (87.19%)
       220,599,197      L1-dcache-load-misses     #    3.67% of all L1-dcache hits    (87.55%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     3,126,767,621      L1-icache-loads                                               (87.71%)
        76,452,128      L1-icache-load-misses                                         (87.57%)
   <not supported>      dTLB-loads                                                  
        12,265,112      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.62%)
   <not supported>      iTLB-loads                                                  
           987,053      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.32%)

      30.027325100 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:entOS ~]#   q': perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
[root@CentOS ~]#   ': perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.
8.12.11 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168


    bw  =  1.8 MB/sec
tcp_bw:
    bw  =  3.56 MB/sec
tcp_bw:
    bw  =  7.07 MB/sec
tcp_bw:
    bw  =  14.2 MB/sec
tcp_bw:
    bw  =  28.7 MB/sec
tcp_bw:
    bw  =  52.3 MB/sec
tcp_bw:
    bw  =  106 MB/sec
tcp_bw:
    bw  =  191 MB/sec
tcp_bw:
    bw  =  320 MB/sec
tcp_bw:
    bw  =  519 MB/sec
tcp_bw:
    bw  =  879 MB/sec
tcp_bw:
    bw  =  881 MB/sec
tcp_bw:
    bw  =  1.1 GB/sec
tcp_bw:
    bw  =  1.1 GB/sec
tcp_bw:
    bw  =  1.15 GB/sec
tcp_bw:
    bw  =  1.13 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.8 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66.4 us
tcp_lat:
    latency  =  67.3 us
tcp_lat:
    latency  =  70.8 us
tcp_lat:
    latency  =  76.6 us
tcp_lat:
    latency  =  109 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    69,211,582,087      instructions              #    1.02  insn per cycle           (74.91%)
           485,448      cs                                                          
    67,616,280,863      cycles                                                        (87.35%)
    37,681,091,296      L1-dcache-loads                                               (87.74%)
       385,007,401      L1-dcache-load-misses     #    1.02% of all L1-dcache hits    (87.30%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,628,867,761      L1-icache-loads                                               (87.71%)
       712,297,057      L1-icache-load-misses                                         (87.35%)
   <not supported>      dTLB-loads                                                  
       115,928,892      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.61%)
   <not supported>      iTLB-loads                                                  
         4,421,681      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.39%)

      64.409017660 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC
size:1:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s
 Performance counter stats for 'netserver':

           899,717      instructions              #    0.18  insn per cycle           (94.08%)
                 3      cs                                                          
         4,956,765      cycles                                                      
           547,138      L1-dcache-loads                                             
            24,358      L1-dcache-load-misses     #    4.45% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           600,502      L1-icache-loads                                             
            22,975      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             3,745      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
             1,014      iTLB-load-misses          #    0.00% of all iTLB cache hits   (16.38%)

       0.002918580 seconds time elapsed

[root@CentOS ~]# 

2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 34596 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec   955 MBytes  8.01 Gbits/sec
[  3]  1.0- 2.0 sec   815 MBytes  6.83 Gbits/sec
[  3]  2.0- 3.0 sec   814 MBytes  6.83 Gbits/sec
[  3]  3.0- 4.0 sec   816 MBytes  6.84 Gbits/sec
[  3]  4.0- 5.0 sec   807 MBytes  6.77 Gbits/sec
[  3]  5.0- 6.0 sec   770 MBytes  6.46 Gbits/sec
[  3]  6.0- 7.0 sec   770 MBytes  6.46 Gbits/sec
[  3]  7.0- 8.0 sec   770 MBytes  6.46 Gbits/sec
[  3]  8.0- 9.0 sec   771 MBytes  6.47 Gbits/sec
[  3]  9.0-10.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 10.0-11.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 11.0-12.0 sec   769 MBytes  6.45 Gbits/sec
[  3] 12.0-13.0 sec   768 MBytes  6.45 Gbits/sec
[  3] 13.0-14.0 sec   769 MBytes  6.45 Gbits/sec
[  3] 14.0-15.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 15.0-16.0 sec   768 MBytes  6.44 Gbits/sec
[  3] 16.0-17.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 17.0-18.0 sec   769 MBytes  6.45 Gbits/sec
[  3] 18.0-19.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 19.0-20.0 sec   768 MBytes  6.45 Gbits/sec
[  3] 20.0-21.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 21.0-22.0 sec   770 MBytes  6.46 Gbits/sec
[  3] 22.0-23.0 sec   900 MBytes  7.55 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.09 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec   869 MBytes  7.29 Gbits/sec
[  3] 28.0-29.0 sec   769 MBytes  6.45 Gbits/sec
[  3] 29.0-30.0 sec   770 MBytes  6.46 Gbits/sec
[  3]  0.0-30.0 sec  24.5 GBytes  7.01 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

     9,590,931,428      instructions              #    0.91  insns per cycle          (75.18%)
            50,978      cs                                                          
    10,548,879,813      cycles                                                        (87.76%)
     6,054,531,540      L1-dcache-loads                                               (87.31%)
       223,401,608      L1-dcache-load-misses     #    3.69% of all L1-dcache hits    (87.27%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     3,153,541,996      L1-icache-loads                                               (88.39%)
        75,290,517      L1-icache-load-misses                                         (87.67%)
   <not supported>      dTLB-loads               
        12,002,812      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.51%)
   <not supported>      iTLB-loads               
           894,230      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.69%)

      30.026304760 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001stat -d -d -e instructions,cs,cycles iperf -c 192
TCP window size:  448 KByte (WARNING: requested  256 KByte)cs,cycles iperf -c 192.
------------------------------------------------------------,cycles iperf -c 192.1
[root@CentOS ~]#     r': perf stat -d -d -e instructions,cs,cycles iperf -c 192.16
[root@CentOS ~]#    e': perf stat -d -d -e instructions,cs,cycles iperf -c 192.168
8.12.12 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168


[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 54746
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  24.4 GBytes  6.98 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    14,347,045,934      instructions              #    0.20  insns per cycle          (75.00%)
            13,678      cs                                                          
    70,877,370,464      cycles                                                        (87.50%)
     7,707,414,818      L1-dcache-loads                                               (87.49%)
       751,323,123      L1-dcache-load-misses     #    9.75% of all L1-dcache hits    (87.51%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,058,992,761      L1-icache-loads                                               (87.49%)
        72,467,980      L1-icache-load-misses                                         (87.48%)
   <not supported>      dTLB-loads               
        43,504,594      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.53%)
   <not supported>      iTLB-loads               
           799,012      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.51%)

      42.062053260 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    74,806,118,201      instructions              #    0.90  insns per cycle          (75.15%)
           574,502      cs                                                          
    82,821,994,311      cycles                                                        (87.64%)
    38,320,041,852      L1-dcache-loads                                               (87.55%)
       669,588,864      L1-dcache-load-misses     #    1.75% of all L1-dcache hits    (87.33%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    32,120,641,521      L1-icache-loads                                               (87.41%)
       796,711,101      L1-icache-load-misses                                         (87.61%)
   <not supported>      dTLB-loads               
       151,901,651      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.39%)
   <not supported>      iTLB-loads               
         5,452,805      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.61%)

      72.711132660 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
92.168.12.12 -l 60`et': perf stat -d -d -e instructions,cs,cycles   netperf -H 19




Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9388.03   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    31,928,931,521      instructions              #    0.94  insns per cycle          (75.34%)
            42,565      cs                                                          
    33,799,478,964      cycles                                                        (87.74%)
    19,494,979,145      L1-dcache-loads                                               (88.10%)
       647,797,723      L1-dcache-load-misses     #    3.32% of all L1-dcache hits    (87.02%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    11,363,626,297      L1-icache-loads                                               (87.09%)
       284,774,691      L1-icache-load-misses                                         (86.73%)
   <not supported>      dTLB-loads               
        52,443,448      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.04%)
   <not supported>      iTLB-loads               
         1,264,326      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.69%)

      60.010937380 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 




================================================================
2.2 est705-1470:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11

------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 45484 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,660,187,611      instructions              #    0.88  insn per cycle           (73.08%)
            62,312      cs                                                          
    16,724,028,514      cycles                                                        (85.90%)
     8,899,377,777      L1-dcache-loads                                               (87.75%)
       357,765,843      L1-dcache-load-misses     #    4.02% of all L1-dcache hits    (88.19%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,111,698,085      L1-icache-loads                                               (88.50%)
       168,922,612      L1-icache-load-misses                                         (88.15%)
   <not supported>      dTLB-loads                                                  
        34,251,348      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.06%)
   <not supported>      iTLB-loads                                                  
        10,502,971      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.41%)

      30.029283500 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 45486 connected with 192.168.12.11 port 5001

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.40 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,528,387,266      instructions              #    0.92  insn per cycle           (76.47%)
            60,230      cs                                                          
    15,719,629,479      cycles                                                        (87.77%)
     8,829,256,024      L1-dcache-loads                                               (86.63%)
       342,999,002      L1-dcache-load-misses     #    3.88% of all L1-dcache hits    (86.78%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,025,345,948      L1-icache-loads                                               (88.48%)
       159,980,554      L1-icache-load-misses                                         (85.98%)
   <not supported>      dTLB-loads                                                  
        33,421,636      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.72%)
   <not supported>      iTLB-loads                                                  
        10,051,425      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.96%)

      30.028790760 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001 -d -d -e instructions,cs,cycles iperf -s -w 256k
TCP window size:  448 KByte (WARNING: requested  256 KByte)ycles iperf -c 192.168
------------------------------------------------------------


[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 48044
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    23,498,592,627      instructions              #    0.80  insn per cycle           (74.86%)
           515,997      cs                                                          
    29,228,845,990      cycles                                                        (87.94%)
    12,393,334,794      L1-dcache-loads                                               (88.14%)
       960,575,469      L1-dcache-load-misses     #    7.75% of all L1-dcache hits    (86.94%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     8,436,655,209      L1-icache-loads                                               (87.95%)
       425,083,576      L1-icache-load-misses                                         (87.70%)
   <not supported>      dTLB-loads                                                  
        77,157,078      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.45%)
   <not supported>      iTLB-loads                                                  
        27,713,809      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.08%)

      78.250415260 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s

    bw  =  1.76 MB/sec
tcp_bw:
    bw  =  3.57 MB/sec
tcp_bw:
    bw  =  7.07 MB/sec
tcp_bw:
    bw  =  13.9 MB/sec
tcp_bw:
    bw  =  26.9 MB/sec
tcp_bw:
    bw  =  52 MB/sec
tcp_bw:
    bw  =  106 MB/sec
tcp_bw:
    bw  =  199 MB/sec
tcp_bw:
    bw  =  339 MB/sec
tcp_bw:
    bw  =  516 MB/sec
tcp_bw:
    bw  =  695 MB/sec
tcp_bw:
    bw  =  871 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.8 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  65.6 us
tcp_lat:
    latency  =  65.7 us
tcp_lat:
    latency  =  70.2 us
tcp_lat:
    latency  =  78.9 us
tcp_lat:
    latency  =  96.7 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    67,973,877,436      instructions              #    1.01  insn per cycle           (75.14%)
           487,103      cs                                                          
    67,074,807,484      cycles                                                        (87.43%)
    37,046,156,745      L1-dcache-loads                                               (87.51%)
       482,086,847      L1-dcache-load-misses     #    1.30% of all L1-dcache hits    (87.57%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,276,561,706      L1-icache-loads                                               (87.54%)
       683,647,086      L1-icache-load-misses                                         (87.46%)
   <not supported>      dTLB-loads                                                  
       485,408,740      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.45%)
   <not supported>      iTLB-loads                                                  
        66,170,292      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.34%)

      64.230353940 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

         1,144,200      instructions              #    0.22  insn per cycle         
                 3      cs                                                          
         5,227,122      cycles                                                      
           510,708      L1-dcache-loads                                             
            22,526      L1-dcache-load-misses     #    4.41% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           749,046      L1-icache-loads                                             
            26,303      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             6,244      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
     <not counted>      iTLB-load-misses                                              (0.00%)

       0.002996040 seconds time elapsed

[root@CentOS ~]# 

[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k56k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 45484
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 45486
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    54,930,914,531      instructions              #    0.81  insns per cycle          (75.18%)
           853,208      cs                                                          
    67,498,639,507      cycles                                                        (87.47%)
    28,527,091,137      L1-dcache-loads                                               (87.11%)
     1,973,494,565      L1-dcache-load-misses     #    6.92% of all L1-dcache hits    (87.29%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    19,445,308,448      L1-icache-loads                                               (87.70%)
       850,746,345      L1-icache-load-misses                                         (87.80%)
   <not supported>      dTLB-loads               
       162,562,523      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.48%)
   <not supported>      iTLB-loads               
        51,888,246      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.52%)

      84.624904920 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------ycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
Client connecting to 192.168.12.12, TCP port 5001ctions,cs,cycles iperf -s -w 256
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 48044 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,715,191,528      instructions              #    0.86  insns per cycle          (75.02%)
            61,725      cs                                                          
    17,037,837,874      cycles                                                        (87.27%)
     8,917,585,682      L1-dcache-loads                                               (87.73%)
       362,543,347      L1-dcache-load-misses     #    4.07% of all L1-dcache hits    (87.25%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,133,538,332      L1-icache-loads                                               (88.07%)
       172,661,280      L1-icache-load-misses                                         (87.67%)
   <not supported>      dTLB-loads               
        35,465,521      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.72%)
   <not supported>      iTLB-loads               
        10,551,285      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.60%)

      30.029772120 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    76,947,016,102      instructions              #    0.99  insns per cycle          (74.65%)
           622,195      cs                                                          
    77,665,710,208      cycles                                                        (87.28%)
    39,717,443,808      L1-dcache-loads                                               (87.30%)
       666,061,759      L1-dcache-load-misses     #    1.68% of all L1-dcache hits    (87.52%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    32,231,239,220      L1-icache-loads                                               (87.50%)
       847,188,600      L1-icache-load-misses                                         (87.55%)
   <not supported>      dTLB-loads               
       261,872,115      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.99%)
   <not supported>      iTLB-loads               
        39,651,394      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.77%)

      75.659932020 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.67   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    34,024,987,159      instructions              #    0.93  insns per cycle          (75.30%)
            42,382      cs                                                          
    36,535,334,963      cycles                                                        (87.68%)
    20,390,580,718      L1-dcache-loads                                               (87.74%)
       737,817,826      L1-dcache-load-misses     #    3.62% of all L1-dcache hits    (88.13%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,502,153,530      L1-icache-loads                                               (87.15%)
       330,221,800      L1-icache-load-misses                                         (86.70%)
   <not supported>      dTLB-loads               
       148,124,956      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.53%)
   <not supported>      iTLB-loads               
        24,117,043      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.48%)

      60.011362780 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 


================================================================
2.1.1 est1-350:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k6
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 33982
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  25.0 GBytes  7.15 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    14,884,017,756      instructions              #    0.22  insn per cycle           (75.04%)
            95,373      cs                                                          
    66,761,560,165      cycles                                                        (87.46%)
     7,976,220,565      L1-dcache-loads                                               (87.47%)
       767,642,195      L1-dcache-load-misses     #    9.62% of all L1-dcache hits    (87.32%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,365,788,366      L1-icache-loads                                               (87.55%)
       110,959,919      L1-icache-load-misses                                         (87.59%)
   <not supported>      dTLB-loads                                                  
        47,670,127      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.53%)
   <not supported>      iTLB-loads                                                  
           846,911      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.50%)

      49.299851940 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------ycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
Client connecting to 192.168.12.11, TCP port 5001tions,cs,cycles iperf -s -w 256k
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 38454 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec   949 MBytes  7.96 Gbits/sec
[  3]  1.0- 2.0 sec   792 MBytes  6.65 Gbits/sec
[  3]  2.0- 3.0 sec   770 MBytes  6.46 Gbits/sec
[  3]  3.0- 4.0 sec   816 MBytes  6.84 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  5.0- 6.0 sec   944 MBytes  7.92 Gbits/sec
[  3]  6.0- 7.0 sec   821 MBytes  6.89 Gbits/sec
[  3]  7.0- 8.0 sec   823 MBytes  6.90 Gbits/sec
[  3]  8.0- 9.0 sec   824 MBytes  6.92 Gbits/sec
[  3]  9.0-10.0 sec   825 MBytes  6.92 Gbits/sec
[  3] 10.0-11.0 sec   891 MBytes  7.47 Gbits/sec
[  3] 11.0-12.0 sec   825 MBytes  6.92 Gbits/sec
[  3] 12.0-13.0 sec   827 MBytes  6.93 Gbits/sec
[  3] 13.0-14.0 sec   892 MBytes  7.48 Gbits/sec
[  3] 14.0-15.0 sec   816 MBytes  6.85 Gbits/sec
[  3] 15.0-16.0 sec   816 MBytes  6.84 Gbits/sec
[  3] 16.0-17.0 sec   817 MBytes  6.85 Gbits/sec
[  3] 17.0-18.0 sec   901 MBytes  7.56 Gbits/sec
[  3] 18.0-19.0 sec   822 MBytes  6.89 Gbits/sec
[  3] 19.0-20.0 sec   822 MBytes  6.89 Gbits/sec
[  3] 20.0-21.0 sec   821 MBytes  6.89 Gbits/sec
[  3] 21.0-22.0 sec   821 MBytes  6.89 Gbits/sec
[  3] 22.0-23.0 sec   821 MBytes  6.89 Gbits/sec
[  3] 23.0-24.0 sec   822 MBytes  6.90 Gbits/sec
[  3] 24.0-25.0 sec   825 MBytes  6.92 Gbits/sec
[  3] 25.0-26.0 sec   826 MBytes  6.93 Gbits/sec
[  3] 26.0-27.0 sec   824 MBytes  6.92 Gbits/sec
[  3] 27.0-28.0 sec   825 MBytes  6.92 Gbits/sec
[  3] 28.0-29.0 sec   824 MBytes  6.92 Gbits/sec
[  3] 29.0-30.0 sec   825 MBytes  6.92 Gbits/sec
[  3]  0.0-30.0 sec  24.8 GBytes  7.09 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

     9,632,716,758      instructions              #    0.97  insn per cycle           (75.05%)
            51,454      cs                                                          
     9,966,434,948      cycles                                                        (88.01%)
     6,088,448,882      L1-dcache-loads                                               (87.24%)
       214,868,427      L1-dcache-load-misses     #    3.53% of all L1-dcache hits    (87.80%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     3,181,811,786      L1-icache-loads                                               (87.59%)
        75,182,228      L1-icache-load-misses                                         (88.23%)
   <not supported>      dTLB-loads                                                  
        11,880,159      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.22%)
   <not supported>      iTLB-loads                                                  
         1,285,727      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.93%)

      30.026879240 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s


    bw  =  1.81 MB/sec
tcp_bw:
    bw  =  3.57 MB/sec
tcp_bw:
    bw  =  7.23 MB/sec
tcp_bw:
    bw  =  13.9 MB/sec
tcp_bw:
    bw  =  28 MB/sec
tcp_bw:
    bw  =  52.5 MB/sec
tcp_bw:
    bw  =  102 MB/sec
tcp_bw:
    bw  =  188 MB/sec
tcp_bw:
    bw  =  325 MB/sec
tcp_bw:
    bw  =  505 MB/sec
tcp_bw:
    bw  =  701 MB/sec
tcp_bw:
    bw  =  1.02 GB/sec
tcp_bw:
    bw  =  1.1 GB/sec
tcp_bw:
    bw  =  1.12 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.09 GB/sec
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66.5 us
tcp_lat:
    latency  =  66.7 us
tcp_lat:
    latency  =  70.5 us
tcp_lat:
    latency  =  77.8 us
tcp_lat:
    latency  =  108 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    68,445,879,608      instructions              #    1.03  insn per cycle           (75.08%)
           486,691      cs                                                          
    66,603,412,536      cycles                                                        (87.45%)
    37,301,273,171      L1-dcache-loads                                               (87.40%)
       447,195,054      L1-dcache-load-misses     #    1.20% of all L1-dcache hits    (87.49%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,451,035,972      L1-icache-loads                                               (87.52%)
       688,776,742      L1-icache-load-misses                                         (87.55%)
   <not supported>      dTLB-loads                                                  
       114,580,995      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.50%)
   <not supported>      iTLB-loads                                                  
         7,014,133      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.46%)

      64.422287420 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           240,636      instructions              #    0.06  insn per cycle           (80.45%)
                 2      cs                                                          
         4,056,355      cycles                                                        (89.67%)
           491,035      L1-dcache-loads                                             
            20,529      L1-dcache-load-misses     #    4.18% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           542,114      L1-icache-loads                                             
            21,122      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             3,699      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
               942      iTLB-load-misses          #    0.00% of all iTLB cache hits   (68.99%)

       0.003212520 seconds time elapsed

[root@CentOS ~]# 

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
2.168.12.12 -l 60)`i': perf stat -d -d -e instructions,cs,cycles   netperf -H 192
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 33982 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.01 GBytes  8.70 Gbits/sec
[  3]  5.0- 6.0 sec   802 MBytes  6.73 Gbits/sec
[  3]  6.0- 7.0 sec   803 MBytes  6.74 Gbits/sec
[  3]  7.0- 8.0 sec   801 MBytes  6.72 Gbits/sec
[  3]  8.0- 9.0 sec   800 MBytes  6.72 Gbits/sec
[  3]  9.0-10.0 sec   803 MBytes  6.73 Gbits/sec
[  3] 10.0-11.0 sec   801 MBytes  6.72 Gbits/sec
[  3] 11.0-12.0 sec   802 MBytes  6.73 Gbits/sec
[  3] 12.0-13.0 sec   888 MBytes  7.44 Gbits/sec
[  3] 13.0-14.0 sec   793 MBytes  6.65 Gbits/sec
[  3] 14.0-15.0 sec   792 MBytes  6.65 Gbits/sec
[  3] 15.0-16.0 sec   795 MBytes  6.67 Gbits/sec
[  3] 16.0-17.0 sec   796 MBytes  6.67 Gbits/sec
[  3] 17.0-18.0 sec   795 MBytes  6.67 Gbits/sec
[  3] 18.0-19.0 sec   793 MBytes  6.66 Gbits/sec
[  3] 19.0-20.0 sec   793 MBytes  6.65 Gbits/sec
[  3] 20.0-21.0 sec   792 MBytes  6.64 Gbits/sec
[  3] 21.0-22.0 sec   792 MBytes  6.65 Gbits/sec
[  3] 22.0-23.0 sec   795 MBytes  6.67 Gbits/sec
[  3] 23.0-24.0 sec   791 MBytes  6.63 Gbits/sec
[  3] 24.0-25.0 sec   842 MBytes  7.07 Gbits/sec
[  3] 25.0-26.0 sec   797 MBytes  6.69 Gbits/sec
[  3] 26.0-27.0 sec   799 MBytes  6.70 Gbits/sec
[  3] 27.0-28.0 sec   798 MBytes  6.69 Gbits/sec
[  3] 28.0-29.0 sec   797 MBytes  6.69 Gbits/sec
[  3] 29.0-30.0 sec   798 MBytes  6.69 Gbits/sec
[  3]  0.0-30.0 sec  25.0 GBytes  7.15 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

     9,691,094,896      instructions              #    0.97  insns per cycle          (75.85%)
            49,856      cs                                                          
     9,952,031,220      cycles                                                        (88.51%)
     6,132,664,635      L1-dcache-loads                                               (87.28%)
       223,519,405      L1-dcache-load-misses     #    3.64% of all L1-dcache hits    (85.91%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     3,196,184,736      L1-icache-loads                                               (87.70%)
        67,646,179      L1-icache-load-misses                                         (87.58%)
   <not supported>      dTLB-loads               
        11,011,789      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.15%)
   <not supported>      iTLB-loads               
         1,155,391      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.62%)

      30.042123300 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001-d -d -e instructions,cs,cycles iperf -c 192.168
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 38454
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  24.8 GBytes  7.09 Gbits/sec



 Performance counter stats for 'iperf -s -w 256k':

    15,177,112,277      instructions              #    0.22  insns per cycle          (75.00%)
            34,252      cs                                                          
    69,778,174,413      cycles                                                        (87.50%)
     8,117,895,312      L1-dcache-loads                                               (87.52%)
       768,805,860      L1-dcache-load-misses     #    9.47% of all L1-dcache hits    (87.49%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,417,663,597      L1-icache-loads                                               (87.57%)
        87,212,319      L1-icache-load-misses                                         (87.50%)
   <not supported>      dTLB-loads               
        46,610,848      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.46%)
   <not supported>      iTLB-loads               
           791,341      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.47%)

      48.448320320 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    74,936,899,213      instructions              #    0.90  insns per cycle          (74.93%)
           570,509      cs                                                          
    82,911,953,321      cycles                                                        (87.47%)
    38,436,241,127      L1-dcache-loads                                               (87.40%)
       672,310,533      L1-dcache-load-misses     #    1.75% of all L1-dcache hits    (87.68%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    31,814,527,417      L1-icache-loads                                               (87.59%)
       792,164,678      L1-icache-load-misses                                         (87.52%)
   <not supported>      dTLB-loads               
       146,241,278      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.41%)
   <not supported>      iTLB-loads               
        43,189,663      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.52%)

      72.228666940 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.01    7556.44   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    25,271,731,234      instructions              #    0.91  insns per cycle          (75.27%)
            34,134      cs                                                          
    27,660,228,208      cycles                                                        (87.60%)
    15,494,834,021      L1-dcache-loads                                               (87.77%)
       502,788,288      L1-dcache-load-misses     #    3.24% of all L1-dcache hits    (87.19%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     8,989,362,402      L1-icache-loads                                               (87.68%)
       168,668,732      L1-icache-load-misses                                         (87.46%)
   <not supported>      dTLB-loads               
        27,527,078      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.20%)
   <not supported>      iTLB-loads               
         1,569,721      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.43%)

      60.016447940 seconds time elapsed

[root@CentOS ~]# 
12.12 -l 60S ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.01    8522.42   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    28,667,077,788      instructions              #    0.96  insns per cycle          (75.18%)
            37,577      cs                                                          
    29,900,817,635      cycles                                                        (87.67%)
    17,584,595,587      L1-dcache-loads                                               (87.49%)
       544,639,131      L1-dcache-load-misses     #    3.10% of all L1-dcache hits    (87.40%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    10,233,110,531      L1-icache-loads                                               (87.24%)
       209,205,172      L1-icache-load-misses                                         (87.43%)
   <not supported>      dTLB-loads               
        38,571,662      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.81%)
   <not supported>      iTLB-loads               
         1,635,502      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.47%)

      60.011548400 seconds time elapsed

12.12 -l 60S ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.01    8065.56   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    27,064,422,836      instructions              #    0.96  insns per cycle          (74.79%)
            35,935      cs                                                          
    28,084,153,552      cycles                                                        (87.24%)
    16,605,039,951      L1-dcache-loads                                               (87.43%)
       539,572,061      L1-dcache-load-misses     #    3.25% of all L1-dcache hits    (87.69%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     9,673,646,920      L1-icache-loads                                               (87.46%)
       194,786,316      L1-icache-load-misses                                         (87.80%)
   <not supported>      dTLB-loads               
        41,901,126      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.54%)
   <not supported>      iTLB-loads               
         1,722,352      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.29%)

      60.013016200 seconds time elapsed

[root@CentOS ~]# 





================================================================
2.1.2 est351-704:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11

------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 46954 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.39 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,821,840,080      instructions              #    0.83  insn per cycle           (75.99%)
            58,093      cs                                                          
    17,943,532,538      cycles                                                        (87.56%)
     8,999,687,578      L1-dcache-loads                                               (86.74%)
       369,615,209      L1-dcache-load-misses     #    4.11% of all L1-dcache hits    (86.57%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,209,331,199      L1-icache-loads                                               (88.43%)
       174,965,824      L1-icache-load-misses                                         (88.71%)
   <not supported>      dTLB-loads                                                  
        34,199,010      dTLB-load-misses          #    0.00% of all dTLB cache hits   (86.86%)
   <not supported>      iTLB-loads                                                  
        11,370,292      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.90%)

      30.029933460 seconds time elapsed

[root@CentOS ~]# 
1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 46956 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,484,790,627      instructions              #    0.93  insn per cycle           (76.24%)
            63,154      cs                                                          
    15,626,210,241      cycles                                                        (89.01%)
     8,823,960,502      L1-dcache-loads                                               (86.93%)
       355,009,758      L1-dcache-load-misses     #    4.02% of all L1-dcache hits    (88.37%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,051,538,274      L1-icache-loads                                               (87.41%)
       161,241,477      L1-icache-load-misses                                         (86.87%)
   <not supported>      dTLB-loads                                                  
        35,193,830      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.69%)
   <not supported>      iTLB-loads                                                  
        10,633,097      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.58%)

      30.029948960 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001-d -d -e instructions,cs,cycles iperf -c 192.168
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 51268
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    29,190,844,987      instructions              #    0.82  insn per cycle           (74.85%)
           383,368      cs                                                          
    35,563,182,968      cycles                                                        (87.54%)
    15,122,677,976      L1-dcache-loads                                               (88.12%)
     1,010,477,446      L1-dcache-load-misses     #    6.68% of all L1-dcache hits    (87.12%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    10,373,345,908      L1-icache-loads                                               (87.41%)
       432,403,305      L1-icache-load-misses                                         (87.47%)
   <not supported>      dTLB-loads                                                  
        86,057,547      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.09%)
   <not supported>      iTLB-loads                                                  
        27,697,988      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.02%)

      51.036208960 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s

    bw  =  1.79 MB/sec
tcp_bw:
    bw  =  3.46 MB/sec
tcp_bw:
    bw  =  7.09 MB/sec
tcp_bw:
    bw  =  13.7 MB/sec
tcp_bw:
    bw  =  26.7 MB/sec
tcp_bw:
    bw  =  52.8 MB/sec
tcp_bw:
    bw  =  105 MB/sec
tcp_bw:
    bw  =  193 MB/sec
tcp_bw:
    bw  =  330 MB/sec
tcp_bw:
    bw  =  493 MB/sec
tcp_bw:
    bw  =  686 MB/sec
tcp_bw:
    bw  =  871 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  65.2 us
tcp_lat:
    latency  =  66.1 us
tcp_lat:
    latency  =  72.2 us
tcp_lat:
    latency  =  79.1 us
tcp_lat:
    latency  =  95.9 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    67,786,119,362      instructions              #    1.03  insn per cycle           (75.04%)
           487,186      cs                                                          
    66,120,493,776      cycles                                                        (87.52%)
    36,969,939,479      L1-dcache-loads                                               (87.55%)
       495,572,035      L1-dcache-load-misses     #    1.34% of all L1-dcache hits    (87.52%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,306,246,996      L1-icache-loads                                               (87.51%)
       721,372,480      L1-icache-load-misses                                         (87.62%)
   <not supported>      dTLB-loads                                                  
       477,310,297      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.45%)
   <not supported>      iTLB-loads                                                  
        33,957,486      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.32%)

      64.211567960 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

         1,119,049      instructions              #    0.22  insn per cycle         
                 2      cs                                                          
         5,023,043      cycles                                                      
           498,924      L1-dcache-loads                                             
            21,271      L1-dcache-load-misses     #    4.26% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           740,635      L1-icache-loads                                             
            25,271      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             5,847      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
     <not counted>      iTLB-load-misses                                              (0.00%)

       0.002976440 seconds time elapsed

[root@CentOS ~]# 


[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k 256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 46954
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 46956
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    59,426,736,899      instructions              #    0.84  insns per cycle          (75.27%)
           737,586      cs                                                          
    71,114,695,589      cycles                                                        (87.49%)
    30,737,512,141      L1-dcache-loads                                               (87.47%)
     2,028,867,113      L1-dcache-load-misses     #    6.60% of all L1-dcache hits    (87.14%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    21,117,866,651      L1-icache-loads                                               (87.49%)
       867,368,291      L1-icache-load-misses                                         (87.51%)
   <not supported>      dTLB-loads               
       177,145,247      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.97%)
   <not supported>      iTLB-loads               
        54,350,134      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.33%)

      77.609684200 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------ycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
Client connecting to 192.168.12.12, TCP port 5001ctions,cs,cycles iperf -s -w 256
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 51268 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 14.0-15.0 sec  1.09 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,453,416,402      instructions              #    0.94  insns per cycle          (74.44%)
            63,348      cs                                                          
    15,455,786,471      cycles                                                        (86.96%)
     8,805,908,316      L1-dcache-loads                                               (87.48%)
       343,721,327      L1-dcache-load-misses     #    3.90% of all L1-dcache hits    (85.88%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,017,403,131      L1-icache-loads                                               (88.39%)
       157,220,053      L1-icache-load-misses                                         (87.11%)
   <not supported>      dTLB-loads               
        32,871,804      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.93%)
   <not supported>      iTLB-loads               
        10,666,939      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.87%)

      30.029745280 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    77,312,760,409      instructions              #    0.98  insns per cycle          (74.96%)
           596,209      cs                                                          
    79,078,409,131      cycles                                                        (87.37%)
    39,784,644,006      L1-dcache-loads                                               (87.51%)
       718,250,530      L1-dcache-load-misses     #    1.81% of all L1-dcache hits    (87.17%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    32,452,119,536      L1-icache-loads                                               (87.51%)
       869,369,768      L1-icache-load-misses                                         (87.50%)
   <not supported>      dTLB-loads               
       293,248,314      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.69%)
   <not supported>      iTLB-loads               
        86,224,121      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.88%)

      73.141885940 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.67   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    33,895,042,767      instructions              #    0.91  insns per cycle          (74.83%)
            42,693      cs                                                          
    37,209,341,160      cycles                                                        (87.23%)
    20,412,267,486      L1-dcache-loads                                               (87.74%)
       806,868,454      L1-dcache-load-misses     #    3.95% of all L1-dcache hits    (87.18%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,562,196,820      L1-icache-loads                                               (87.84%)
       333,113,965      L1-icache-load-misses                                         (87.41%)
   <not supported>      dTLB-loads               
       140,678,036      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.29%)
   <not supported>      iTLB-loads               
        27,280,263      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.71%)

      60.023896020 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
================================================================
2.1.1.1 est1-175:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 44400
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  23.8 GBytes  6.82 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    13,750,571,045      instructions              #    0.19  insn per cycle           (74.98%)
            10,777      cs                                                          
    71,053,944,228      cycles                                                        (87.48%)
     7,405,801,806      L1-dcache-loads                                               (87.50%)
       730,821,534      L1-dcache-load-misses     #    9.87% of all L1-dcache hits    (87.52%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     4,860,127,847      L1-icache-loads                                               (87.48%)
        69,818,978      L1-icache-load-misses                                         (87.52%)
   <not supported>      dTLB-loads                                                  
        41,968,782      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.50%)
   <not supported>      iTLB-loads                                                  
           850,549      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.52%)

      36.233213740 seconds time elapsed

(reverse-i-search)`': 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
connect failed: Connection refused-d -d -e instructions,cs,cycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
kreverse-i-search)`c': perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

           420,705      instructions              #    0.10  insn per cycle         
                 5      cs                                                          
         4,411,535      cycles                                                      
         1,113,320      L1-dcache-loads                                             
            35,995      L1-dcache-load-misses     #    3.23% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
         1,533,889      L1-icache-loads                                             
            32,171      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             5,354      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
             1,004      iTLB-load-misses          #    0.00% of all iTLB cache hits   (80.06%)

       0.002631080 seconds time elapsed

1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 35498 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec   959 MBytes  8.04 Gbits/sec
[  3]  1.0- 2.0 sec   849 MBytes  7.12 Gbits/sec
[  3]  2.0- 3.0 sec   849 MBytes  7.12 Gbits/sec
[  3]  3.0- 4.0 sec   847 MBytes  7.11 Gbits/sec
[  3]  4.0- 5.0 sec   849 MBytes  7.12 Gbits/sec
[  3]  5.0- 6.0 sec   851 MBytes  7.14 Gbits/sec
[  3]  6.0- 7.0 sec   851 MBytes  7.14 Gbits/sec
[  3]  7.0- 8.0 sec   853 MBytes  7.16 Gbits/sec
[  3]  8.0- 9.0 sec   852 MBytes  7.14 Gbits/sec
[  3]  9.0-10.0 sec   852 MBytes  7.14 Gbits/sec
[  3] 10.0-11.0 sec   854 MBytes  7.16 Gbits/sec
[  3] 11.0-12.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 12.0-13.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 13.0-14.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 14.0-15.0 sec   854 MBytes  7.16 Gbits/sec
[  3] 15.0-16.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 16.0-17.0 sec   854 MBytes  7.16 Gbits/sec
[  3] 17.0-18.0 sec   853 MBytes  7.15 Gbits/sec
[  3] 18.0-19.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 19.0-20.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 20.0-21.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 21.0-22.0 sec   884 MBytes  7.42 Gbits/sec
[  3] 22.0-23.0 sec   853 MBytes  7.16 Gbits/sec
[  3] 23.0-24.0 sec   854 MBytes  7.16 Gbits/sec
[  3] 24.0-25.0 sec   853 MBytes  7.15 Gbits/sec
[  3] 25.0-26.0 sec   853 MBytes  7.16 Gbits/sec
[  3] 26.0-27.0 sec   852 MBytes  7.14 Gbits/sec
[  3] 27.0-28.0 sec   852 MBytes  7.15 Gbits/sec
[  3] 28.0-29.0 sec   851 MBytes  7.14 Gbits/sec
[  3] 29.0-30.0 sec   847 MBytes  7.11 Gbits/sec
[  3]  0.0-30.0 sec  25.1 GBytes  7.18 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

     9,741,736,764      instructions              #    0.98  insn per cycle           (74.91%)
            51,058      cs                                                          
     9,940,704,403      cycles                                                        (87.16%)
     6,164,259,172      L1-dcache-loads                                               (87.66%)
       220,791,808      L1-dcache-load-misses     #    3.58% of all L1-dcache hits    (87.15%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     3,186,508,044      L1-icache-loads                                               (87.85%)
        70,362,458      L1-icache-load-misses                                         (88.43%)
   <not supported>      dTLB-loads                                                  
        11,679,968      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.01%)
   <not supported>      iTLB-loads                                                  
         1,147,158      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.11%)

      30.025864720 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s

    bw  =  1.59 MB/sec
tcp_bw:
    bw  =  3.31 MB/sec
tcp_bw:
    bw  =  6.66 MB/sec
tcp_bw:
    bw  =  13 MB/sec
tcp_bw:
    bw  =  26.1 MB/sec
tcp_bw:
    bw  =  51.7 MB/sec
tcp_bw:
    bw  =  95.2 MB/sec
tcp_bw:
    bw  =  188 MB/sec
tcp_bw:
    bw  =  314 MB/sec
tcp_bw:
    bw  =  501 MB/sec
tcp_bw:
    bw  =  704 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.1 GB/sec
tcp_bw:
    bw  =  1.06 GB/sec
tcp_bw:
    bw  =  1.07 GB/sec
tcp_bw:
    bw  =  1.13 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.8 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66.3 us
tcp_lat:
    latency  =  67.3 us
tcp_lat:
    latency  =  71 us
tcp_lat:
    latency  =  77.3 us
tcp_lat:
    latency  =  104 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    65,323,847,012      instructions              #    0.96  insn per cycle           (74.89%)
           485,598      cs                                                          
    68,105,694,821      cycles                                                        (87.36%)
    35,582,767,923      L1-dcache-loads                                               (87.51%)
       409,345,420      L1-dcache-load-misses     #    1.15% of all L1-dcache hits    (87.58%)
   <not supported>      LLC-loads                                                  
   <not supported>      LLC-load-misses                                             
    26,677,103,735      L1-icache-loads                                               (87.56%)
     1,096,201,316      L1-icache-load-misses                                         (87.51%)
   <not supported>      dTLB-loads                                                  
       144,926,681      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.43%)
   <not supported>      iTLB-loads                                                  
         6,237,390      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.52%)

      64.431378160 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           894,098      instructions              #    0.21  insn per cycle         
                 2      cs                                                          
         4,219,105      cycles                                                      
           488,848      L1-dcache-loads                                             
            21,175      L1-dcache-load-misses     #    4.33% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           538,887      L1-icache-loads                                             
            20,613      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             3,420      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
16,062,523,689,864,552      iTLB-load-misses          #    0.00% of all iTLB cache hits   (0.00%)

       0.002747140 seconds time elapsed

[root@CentOS ~]# 

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30

------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 44400 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec   942 MBytes  7.90 Gbits/sec
[  3]  1.0- 2.0 sec   804 MBytes  6.75 Gbits/sec
[  3]  2.0- 3.0 sec   804 MBytes  6.74 Gbits/sec
[  3]  3.0- 4.0 sec   803 MBytes  6.73 Gbits/sec
[  3]  4.0- 5.0 sec   804 MBytes  6.74 Gbits/sec
[  3]  5.0- 6.0 sec   807 MBytes  6.77 Gbits/sec
[  3]  6.0- 7.0 sec   806 MBytes  6.76 Gbits/sec
[  3]  7.0- 8.0 sec   806 MBytes  6.77 Gbits/sec
[  3]  8.0- 9.0 sec   808 MBytes  6.77 Gbits/sec
[  3]  9.0-10.0 sec   807 MBytes  6.77 Gbits/sec
[  3] 10.0-11.0 sec   809 MBytes  6.78 Gbits/sec
[  3] 11.0-12.0 sec   808 MBytes  6.77 Gbits/sec
[  3] 12.0-13.0 sec   809 MBytes  6.79 Gbits/sec
[  3] 13.0-14.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 14.0-15.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 15.0-16.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 16.0-17.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 17.0-18.0 sec   807 MBytes  6.77 Gbits/sec
[  3] 18.0-19.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 19.0-20.0 sec   806 MBytes  6.76 Gbits/sec
[  3] 20.0-21.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 21.0-22.0 sec   808 MBytes  6.78 Gbits/sec
[  3] 22.0-23.0 sec   868 MBytes  7.28 Gbits/sec
[  3] 23.0-24.0 sec   809 MBytes  6.79 Gbits/sec
[  3] 24.0-25.0 sec   808 MBytes  6.77 Gbits/sec
[  3] 25.0-26.0 sec   807 MBytes  6.77 Gbits/sec
[  3] 26.0-27.0 sec   806 MBytes  6.76 Gbits/sec
[  3] 27.0-28.0 sec   804 MBytes  6.75 Gbits/sec
[  3] 28.0-29.0 sec   804 MBytes  6.74 Gbits/sec
[  3] 29.0-30.0 sec   805 MBytes  6.75 Gbits/sec
[  3]  0.0-30.0 sec  23.8 GBytes  6.82 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

     9,269,044,881      instructions              #    0.91  insns per cycle          (76.08%)
            49,603      cs                                                          
    10,222,932,355      cycles                                                        (88.09%)
     5,857,624,541      L1-dcache-loads                                               (87.27%)
       214,570,493      L1-dcache-load-misses     #    3.66% of all L1-dcache hits    (87.52%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     3,028,655,823      L1-icache-loads                                               (87.13%)
        67,964,635      L1-icache-load-misses                                         (87.29%)
   <not supported>      dTLB-loads               
        10,990,813      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.44%)
   <not supported>      iTLB-loads               
         1,273,927      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.33%)

      30.045086160 seconds time elapsed

[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001-d -d -e instructions,cs,cycles iperf -c 192.168
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 35498
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  25.1 GBytes  7.18 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    14,418,399,312      instructions              #    0.20  insns per cycle          (74.97%)
            11,015      cs                                                          
    71,036,350,241      cycles                                                        (87.48%)
     7,759,147,393      L1-dcache-loads                                               (87.51%)
       768,398,459      L1-dcache-load-misses     #    9.90% of all L1-dcache hits    (87.49%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,101,212,076      L1-icache-loads                                               (87.51%)
        71,377,739      L1-icache-load-misses                                         (87.52%)
   <not supported>      dTLB-loads               
        42,483,087      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.50%)
   <not supported>      iTLB-loads               
           851,805      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.51%)

      42.372597580 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    72,657,806,662      instructions              #    0.88  insns per cycle          (75.01%)
           612,444      cs                                                          
    82,160,156,883      cycles                                                        (87.49%)
    37,594,300,153      L1-dcache-loads                                               (87.50%)
       661,716,281      L1-dcache-load-misses     #    1.76% of all L1-dcache hits    (87.53%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    30,831,401,118      L1-icache-loads                                               (87.44%)
       826,813,543      L1-icache-load-misses                                         (87.56%)
   <not supported>      dTLB-loads               
       141,016,091      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.50%)
   <not supported>      iTLB-loads               
         8,929,149      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.51%)

     103.281260620 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9307.07   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    31,606,504,279      instructions              #    0.96  insns per cycle          (75.62%)
            39,979      cs                                                          
    33,084,669,035      cycles                                                        (87.83%)
    19,309,101,790      L1-dcache-loads                                               (86.65%)
       622,878,669      L1-dcache-load-misses     #    3.23% of all L1-dcache hits    (87.75%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    11,138,335,550      L1-icache-loads                                               (87.54%)
       277,601,484      L1-icache-load-misses                                         (87.17%)
   <not supported>      dTLB-loads               
        48,356,854      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.62%)
   <not supported>      iTLB-loads               
         1,726,049      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.65%)

      60.010883140 seconds time elapsed

[root@CentOS ~]# 
12.12 -l 60S ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9276.01   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    31,332,016,883      instructions              #    0.96  insns per cycle          (74.76%)
            39,776      cs                                                          
    32,725,220,851      cycles                                                        (87.40%)
    19,154,943,010      L1-dcache-loads                                               (87.34%)
       611,277,325      L1-dcache-load-misses     #    3.19% of all L1-dcache hits    (87.75%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    10,932,246,384      L1-icache-loads                                               (87.39%)
       256,575,649      L1-icache-load-misses                                         (87.21%)
   <not supported>      dTLB-loads               
        48,790,256      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.97%)
   <not supported>      iTLB-loads               
         1,493,352      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.59%)

      60.007404000 seconds time elapsed

12.12 -l 60S ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET
Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.01    8305.26   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    28,144,030,653      instructions              #    0.89  insns per cycle          (75.41%)
            35,956      cs                                                          
    31,612,705,691      cycles                                                        (87.63%)
    17,193,957,877      L1-dcache-loads                                               (87.15%)
       537,902,808      L1-dcache-load-misses     #    3.13% of all L1-dcache hits    (87.48%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     9,835,721,432      L1-icache-loads                                               (87.47%)
       230,651,158      L1-icache-load-misses                                         (87.72%)
   <not supported>      dTLB-loads               
        41,137,554      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.22%)
   <not supported>      iTLB-loads               
         1,610,009      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.56%)

      60.011628060 seconds time elapsed

[root@CentOS ~]# 



================================================================
2.1.1.2 est176-350:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11

------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 36430 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,848,273,215      instructions              #    0.85  insn per cycle           (74.40%)
            39,543      cs                                                          
    17,367,832,441      cycles                                                        (87.94%)
     8,977,479,369      L1-dcache-loads                                               (87.63%)
       375,027,297      L1-dcache-load-misses     #    4.18% of all L1-dcache hits    (87.78%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,172,017,889      L1-icache-loads                                               (87.08%)
       162,969,303      L1-icache-load-misses                                         (88.50%)
   <not supported>      dTLB-loads                                                  
        33,511,655      dTLB-load-misses          #    0.00% of all dTLB cache hits   (86.66%)
   <not supported>      iTLB-loads                                                  
         8,606,307      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.01%)

      30.029256780 seconds time elapsed

1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 36432 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,676,401,933      instructions              #    0.88  insn per cycle           (76.61%)
            61,796      cs                                                          
    16,703,086,704      cycles                                                        (88.02%)
     8,916,645,927      L1-dcache-loads                                               (87.51%)
       350,513,344      L1-dcache-load-misses     #    3.93% of all L1-dcache hits    (87.85%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,119,287,294      L1-icache-loads                                               (86.60%)
       167,113,039      L1-icache-load-misses                                         (87.18%)
   <not supported>      dTLB-loads                                                  
        33,152,487      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.44%)
   <not supported>      iTLB-loads                                                  
         9,654,099      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.00%)

      30.029228360 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001 -d -d -e instructions,cs,cycles iperf -c 192.168
TCP window size:  448 KByte (WARNING: requested  256 KByte)ycles iperf -c 192.168
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 35966
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    28,529,337,993      instructions              #    0.84  insn per cycle           (75.08%)
           399,142      cs                                                          
    34,092,618,816      cycles                                                        (87.43%)
    14,771,542,126      L1-dcache-loads                                               (87.68%)
     1,009,651,679      L1-dcache-load-misses     #    6.84% of all L1-dcache hits    (87.09%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    10,142,975,372      L1-icache-loads                                               (87.45%)
       479,107,627      L1-icache-load-misses                                         (87.80%)
   <not supported>      dTLB-loads                                                  
        81,532,023      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.34%)
   <not supported>      iTLB-loads                                                  
        24,574,610      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.60%)

      40.693496340 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s

    bw  =  1.79 MB/sec
tcp_bw:
    bw  =  3.59 MB/sec
tcp_bw:
    bw  =  7.2 MB/sec
tcp_bw:
    bw  =  13.9 MB/sec
tcp_bw:
    bw  =  27.4 MB/sec
tcp_bw:
    bw  =  54.6 MB/sec
tcp_bw:
    bw  =  107 MB/sec
tcp_bw:
    bw  =  194 MB/sec
tcp_bw:
    bw  =  326 MB/sec
tcp_bw:
    bw  =  542 MB/sec
tcp_bw:
    bw  =  671 MB/sec
tcp_bw:
    bw  =  814 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.08 GB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66.1 us
tcp_lat:
    latency  =  66.4 us
tcp_lat:
    latency  =  69.9 us
tcp_lat:
    latency  =  79.3 us
tcp_lat:
    latency  =  92.8 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    68,721,178,416      instructions              #    1.04  insn per cycle           (75.00%)
           488,072      cs                                                          
    65,880,006,129      cycles                                                        (87.30%)
    37,413,348,873      L1-dcache-loads                                               (87.20%)
       418,707,047      L1-dcache-load-misses     #    1.12% of all L1-dcache hits    (87.44%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,660,783,312      L1-icache-loads                                               (87.86%)
       737,869,210      L1-icache-load-misses                                         (87.77%)
   <not supported>      dTLB-loads                                                  
       480,896,009      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.50%)
   <not supported>      iTLB-loads                                                  
        31,172,631      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.22%)

      64.188293360 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

         1,119,082      instructions              #    0.22  insn per cycle         
                 3      cs                                                          
         5,113,577      cycles                                                      
           498,470      L1-dcache-loads                                             
            21,627      L1-dcache-load-misses     #    4.34% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           750,213      L1-icache-loads                                             
            26,419      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             5,956      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
     <not counted>      iTLB-load-misses                                              (0.00%)

       0.003012740 seconds time elapsed

[root@CentOS ~]# 


[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k56k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 36430
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 36432
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    59,385,925,468      instructions              #    0.81  insns per cycle          (74.57%)
           744,292      cs                                                          
    73,590,764,858      cycles                                                        (87.57%)
    30,676,492,671      L1-dcache-loads                                               (87.74%)
     2,027,791,702      L1-dcache-load-misses     #    6.61% of all L1-dcache hits    (87.53%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    21,012,483,778      L1-icache-loads                                               (87.57%)
       948,301,442      L1-icache-load-misses                                         (87.54%)
   <not supported>      dTLB-loads               
       174,374,031      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.59%)
   <not supported>      iTLB-loads               
        48,132,345      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.57%)

      97.273366800 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------ycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
Client connecting to 192.168.12.12, TCP port 5001ctions,cs,cycles iperf -s -w 256
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 35966 connected with 192.168.12.12 port 5001

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,756,142,562      instructions              #    0.86  insns per cycle          (75.74%)
            59,527      cs                                                          
    17,146,417,523      cycles                                                        (87.36%)
     8,957,309,926      L1-dcache-loads                                               (87.00%)
       358,885,171      L1-dcache-load-misses     #    4.01% of all L1-dcache hits    (87.30%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     5,158,696,486      L1-icache-loads                                               (86.37%)
       171,671,344      L1-icache-load-misses                                         (88.04%)
   <not supported>      dTLB-loads               
        33,617,623      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.42%)
   <not supported>      iTLB-loads               
         9,596,255      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.40%)

      30.029380400 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    78,975,896,926      instructions              #    0.97  insns per cycle          (75.26%)
           567,075      cs                                                          
    81,695,625,968      cycles                                                        (87.47%)
    40,379,107,744      L1-dcache-loads                                               (87.48%)
       689,440,537      L1-dcache-load-misses     #    1.71% of all L1-dcache hits    (87.28%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    33,206,842,333      L1-icache-loads                                               (87.42%)
       924,205,600      L1-icache-load-misses                                         (87.39%)
   <not supported>      dTLB-loads               
       269,468,250      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.64%)
   <not supported>      iTLB-loads               
        75,138,096      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.76%)

      74.430982380 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.66   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    34,165,303,978      instructions              #    0.90  insns per cycle          (75.36%)
            45,588      cs                                                          
    38,127,868,507      cycles                                                        (87.66%)
    20,348,256,134      L1-dcache-loads                                               (87.43%)
       837,441,539      L1-dcache-load-misses     #    4.12% of all L1-dcache hits    (87.56%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,478,035,031      L1-icache-loads                                               (87.76%)
       437,905,041      L1-icache-load-misses                                         (87.20%)
   <not supported>      dTLB-loads               
       159,926,175      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.72%)
   <not supported>      iTLB-loads               
        24,585,502      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.99%)

      60.010405860 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 


================================================================
2.1.1.1.1[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30

------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 54694 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  1.0- 2.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3]  2.0- 3.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  4.0- 5.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3]  5.0- 6.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  6.0- 7.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 10.0-11.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 12.0-13.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3] 13.0-14.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 14.0-15.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 15.0-16.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3] 16.0-17.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 17.0-18.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 18.0-19.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 19.0-20.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 20.0-21.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 21.0-22.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 22.0-23.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 23.0-24.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 24.0-25.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 25.0-26.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 26.0-27.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 27.0-28.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 28.0-29.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 29.0-30.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  0.0-30.0 sec  32.5 GBytes  9.31 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    13,944,493,529      instructions              #    0.97  insns per cycle          (74.79%)
            49,626      cs                                                          
    14,319,992,960      cycles                                                        (86.78%)
     8,513,266,421      L1-dcache-loads                                               (86.26%)
       308,921,786      L1-dcache-load-misses     #    3.63% of all L1-dcache hits    (85.95%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,717,570,994      L1-icache-loads                                               (86.55%)
       100,234,940      L1-icache-load-misses                                         (88.57%)
   <not supported>      dTLB-loads               
        18,222,114      dTLB-load-misses          #    0.00% of all dTLB cache hits   (89.63%)
   <not supported>      iTLB-loads               
         6,631,484      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.41%)

      30.042869860 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 54696 connected with 192.168.12.12 port 5001

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.28 Gbits/sec


[  3]  1.0- 2.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3]  2.0- 3.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  4.0- 5.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  5.0- 6.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  6.0- 7.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 10.0-11.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 12.0-13.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 13.0-14.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 14.0-15.0 sec  1.08 GBytes  9.23 Gbits/sec
[  3] 15.0-16.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 16.0-17.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 17.0-18.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 18.0-19.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 19.0-20.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 20.0-21.0 sec  1.07 GBytes  9.22 Gbits/sec
[  3] 21.0-22.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 22.0-23.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 23.0-24.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 24.0-25.0 sec  1.07 GBytes  9.20 Gbits/sec
[  3] 25.0-26.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 26.0-27.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 27.0-28.0 sec  1.07 GBytes  9.21 Gbits/sec
[  3] 28.0-29.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 29.0-30.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3]  0.0-30.0 sec  32.3 GBytes  9.25 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    13,836,706,676      instructions              #    0.96  insns per cycle          (75.61%)
            52,183      cs                                                          
    14,474,922,629      cycles                                                        (87.03%)
     8,447,336,244      L1-dcache-loads                                               (87.17%)
       337,220,692      L1-dcache-load-misses     #    3.99% of all L1-dcache hits    (87.66%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,694,599,769      L1-icache-loads                                               (87.23%)
        99,918,741      L1-icache-load-misses                                         (86.33%)
   <not supported>      dTLB-loads               
        18,610,557      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.49%)
   <not supported>      iTLB-loads               
         6,951,061      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.61%)

      30.031334920 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
connect failed: Connection refused-d -d -e instructions,cs,cycles iperf -c 192.168
8.12.12 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168
 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

         3,527,434      instructions              #    0.71  insns per cycle        
                 5      cs                                                          
         4,949,381      cycles                                                      
         1,125,200      L1-dcache-loads                                             
            35,973      L1-dcache-load-misses     #    3.20% of all L1-dcache hits  
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
         1,657,591      L1-icache-loads                                             
            31,552      L1-icache-load-misses                                       
   <not supported>      dTLB-loads               
            10,205      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads               
     <not counted>      iTLB-load-misses           (0.00%)
[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001 -d -d -e instructions,cs,cycles iperf -c 192.168
TCP window size:  448 KByte (WARNING: requested  256 KByte)ycles iperf -c 192.168
------------------------------------------------------------

[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 43394
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 43396
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec



 Performance counter stats for 'iperf -s -w 256k':

    45,741,771,691      instructions              #    0.73  insns per cycle          (75.16%)
         1,094,607      cs                                                          
    62,992,361,722      cycles                                                        (87.56%)
    24,224,110,760      L1-dcache-loads                                               (87.37%)
     1,948,484,600      L1-dcache-load-misses     #    8.04% of all L1-dcache hits    (87.68%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    16,653,100,723      L1-icache-loads                                               (87.97%)
       810,191,673      L1-icache-load-misses                                         (87.43%)
   <not supported>      dTLB-loads               
       122,979,292      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.28%)
   <not supported>      iTLB-loads               
        56,022,132      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.27%)

     108.121292800 seconds time elapsed

2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 54700 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  1.0- 2.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3]  2.0- 3.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3]  4.0- 5.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  5.0- 6.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  6.0- 7.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 10.0-11.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 12.0-13.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3] 13.0-14.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 14.0-15.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 15.0-16.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 16.0-17.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 17.0-18.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 18.0-19.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 19.0-20.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 20.0-21.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 21.0-22.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 22.0-23.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 23.0-24.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 24.0-25.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 25.0-26.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 26.0-27.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 27.0-28.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 28.0-29.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 29.0-30.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  0.0-30.0 sec  32.5 GBytes  9.30 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,167,998,982      instructions              #    0.89  insns per cycle          (72.39%)
            51,260      cs                                                          
    15,913,292,374      cycles                                                        (85.65%)
     8,635,494,792      L1-dcache-loads                                               (87.88%)
       354,179,691      L1-dcache-load-misses     #    4.10% of all L1-dcache hits    (88.03%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,864,450,928      L1-icache-loads                                               (88.51%)
       125,316,255      L1-icache-load-misses                                         (87.08%)
   <not supported>      dTLB-loads               
        19,414,364      dTLB-load-misses          #    0.00% of all dTLB cache hits   (89.11%)
   <not supported>      iTLB-loads               
         7,810,516      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.25%)

      30.024364180 seconds time elapsed

2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 54702 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  1.0- 2.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3]  2.0- 3.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  4.0- 5.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3]  5.0- 6.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  6.0- 7.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3] 10.0-11.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 12.0-13.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 13.0-14.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 14.0-15.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 15.0-16.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 16.0-17.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 17.0-18.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 18.0-19.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 19.0-20.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 20.0-21.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 21.0-22.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 22.0-23.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 23.0-24.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 24.0-25.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 25.0-26.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3] 26.0-27.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 27.0-28.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3] 28.0-29.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 29.0-30.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3]  0.0-30.0 sec  32.4 GBytes  9.27 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,030,890,707      instructions              #    0.89  insns per cycle          (75.04%)
            50,545      cs                                                          
    15,724,769,452      cycles                                                        (87.86%)
     8,545,126,319      L1-dcache-loads                                               (87.55%)
       348,702,269      L1-dcache-load-misses     #    4.08% of all L1-dcache hits    (87.44%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,782,019,833      L1-icache-loads                                               (87.75%)
       110,468,660      L1-icache-load-misses                                         (87.24%)
   <not supported>      dTLB-loads               
        18,743,429      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.50%)
   <not supported>      iTLB-loads               
         7,474,747      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.66%)

      30.028371080 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    69,928,889,149      instructions              #    0.97  insns per cycle          (74.52%)
           735,490      cs                                                          
    72,403,053,969      cycles                                                        (87.00%)
    36,673,838,520      L1-dcache-loads                                               (87.44%)
       690,049,554      L1-dcache-load-misses     #    1.88% of all L1-dcache hits    (87.37%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    30,298,656,714      L1-icache-loads                                               (87.73%)
       843,650,804      L1-icache-load-misses                                         (88.00%)
   <not supported>      dTLB-loads               
       121,460,532      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.80%)
   <not supported>      iTLB-loads               
        45,650,842      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.56%)

      96.392920120 seconds time elapsed

:64k:*2 192.168.12.12 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_size:1 
tcp_bw:
    bw  =  1.57 MB/sec
tcp_bw:
    bw  =  3.29 MB/sec
tcp_bw:
    bw  =  6.64 MB/sec
tcp_bw:
    bw  =  12.7 MB/sec
tcp_bw:
    bw  =  25.1 MB/sec
tcp_bw:
    bw  =  48.5 MB/sec
tcp_bw:
    bw  =  101 MB/sec
tcp_bw:
    bw  =  174 MB/sec
tcp_bw:
    bw  =  320 MB/sec
tcp_bw:
    bw  =  490 MB/sec
tcp_bw:
    bw  =  670 MB/sec
tcp_bw:
    bw  =  821 MB/sec
tcp_bw:
    bw  =  927 MB/sec
tcp_bw:
    bw  =  1.01 GB/sec
tcp_bw:
    bw  =  1.1 GB/sec
tcp_bw:
    bw  =  1.13 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.8 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  66.4 us
tcp_lat:
    latency  =  66.9 us
tcp_lat:
    latency  =  69.9 us
tcp_lat:
    latency  =  78.2 us
tcp_lat:
    latency  =  107 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat':

    63,529,083,739      instructions              #    0.95  insns per cycle          (74.25%)
           484,666      cs                                                          
    66,837,316,017      cycles                                                        (87.10%)
    34,409,864,771      L1-dcache-loads                                               (87.75%)
       619,858,161      L1-dcache-load-misses     #    1.80% of all L1-dcache hits    (87.31%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    26,644,563,514      L1-icache-loads                                               (87.73%)
     1,069,788,723      L1-icache-load-misses                                         (87.69%)
   <not supported>      dTLB-loads               
       216,184,884      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.56%)
   <not supported>      iTLB-loads               
        30,148,185      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.71%)

      64.286936980 seconds time elapsed
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET0
size:1:64k:*2 192.168.12.12 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s


Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.67   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    34,023,929,682      instructions              #    0.90  insns per cycle          (75.81%)
            45,554      cs                                                          
    37,827,455,618      cycles                                                        (87.76%)
    20,373,593,835      L1-dcache-loads                                               (88.51%)
       878,208,582      L1-dcache-load-misses     #    4.31% of all L1-dcache hits    (87.62%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,594,364,939      L1-icache-loads                                               (89.84%)
       395,217,874      L1-icache-load-misses                                         (89.06%)
   <not supported>      dTLB-loads               
        82,102,015      dTLB-load-misses          #    0.00% of all dTLB cache hits   (85.60%)
   <not supported>      iTLB-loads               
        20,250,894      iTLB-load-misses          #    0.00% of all iTLB cache hits   (83.56%)

      60.010014240 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# history | tail
  483  tar -zxf mkernel_est1_87.tar.gz 
  484  . p.sh 
  485  reboot
  486  perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
  487   perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
  488  perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
  489  perf stat -d -d -e instructions,cs,cycles  qperf
  490  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  491  perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.12.12 -l 60
  492  history | tail
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           726,056      instructions              #    0.14  insns per cycle          (78.40%)
                 2      cs                                                          
         5,318,701      cycles                                                      
           532,740      L1-dcache-loads                                             
            21,582      L1-dcache-load-misses     #    4.05% of all L1-dcache hits  
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
           763,707      L1-icache-loads                                             
            25,853      L1-icache-load-misses                                       
   <not supported>      dTLB-loads               
             5,284      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads               
             2,889      iTLB-load-misses          #    0.00% of all iTLB cache hits   (65.84%)

       0.008952960 seconds time elapsed

[root@CentOS ~]# 
 est1-87:



================================================================
2.1.1.1.1 est88-175:
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 54694
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.5 GBytes  9.31 Gbits/sec
[  5] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 54696
[  5]  0.0-30.0 sec  32.3 GBytes  9.24 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    84,935,913,223      instructions              #    0.72  insn per cycle           (74.87%)
           277,496      cs                                                          
   118,088,604,627      cycles                                                        (87.42%)
    42,856,557,905      L1-dcache-loads                                               (87.45%)
     2,285,630,382      L1-dcache-load-misses     #    5.33% of all L1-dcache hits    (87.57%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    29,416,219,186      L1-icache-loads                                               (87.56%)
       708,128,937      L1-icache-load-misses                                         (87.54%)
   <not supported>      dTLB-loads                                                  
       203,350,756      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.55%)
   <not supported>      iTLB-loads                                                  
         7,149,309      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.46%)

      68.052146240 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------ycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
Client connecting to 192.168.12.11, TCP port 5001tions,cs,cycles iperf -s -w 256k
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 43394 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec

[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    13,653,822,444      instructions              #    0.88  insn per cycle           (76.59%)
            63,195      cs                                                          
    15,557,259,456      cycles                                                        (89.26%)
     8,469,711,128      L1-dcache-loads                                               (88.20%)
       323,130,938      L1-dcache-load-misses     #    3.82% of all L1-dcache hits    (86.30%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     4,615,654,682      L1-icache-loads                                               (86.76%)
       140,797,637      L1-icache-load-misses                                         (86.41%)
   <not supported>      dTLB-loads                                                  
        20,768,565      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.34%)
   <not supported>      iTLB-loads                                                  
         2,842,143      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.42%)

      30.029259100 seconds time elapsed

[root@CentOS ~]# 
1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 43396 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.40 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    13,681,370,861      instructions              #    0.86  insn per cycle           (74.94%)
            63,259      cs                                                          
    15,892,574,491      cycles                                                        (87.80%)
     8,491,259,607      L1-dcache-loads                                               (87.39%)
       326,103,153      L1-dcache-load-misses     #    3.84% of all L1-dcache hits    (88.35%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     4,633,232,382      L1-icache-loads                                               (86.96%)
       143,646,127      L1-icache-load-misses                                         (88.12%)
   <not supported>      dTLB-loads                                                  
        20,660,888      dTLB-load-misses          #    0.00% of all dTLB cache hits   (86.80%)
   <not supported>      iTLB-loads                                                  
         2,833,928      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.50%)

      30.022815700 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]#                                                  s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 54700
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.5 GBytes  9.30 Gbits/sec
[  5] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 54702
[  5]  0.0-30.0 sec  32.4 GBytes  9.27 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    80,436,521,006      instructions              #    0.72  insn per cycle           (75.07%)
           348,083      cs                                                          
   111,984,747,710      cycles                                                        (87.50%)
    40,702,148,719      L1-dcache-loads                                               (87.41%)
     2,260,202,014      L1-dcache-load-misses     #    5.55% of all L1-dcache hits    (87.44%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,024,673,175      L1-icache-loads                                               (87.58%)
       725,357,432      L1-icache-load-misses                                         (87.50%)
   <not supported>      dTLB-loads                                                  
       202,643,210      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.55%)
   <not supported>      iTLB-loads                                                  
         7,834,287      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.46%)

      93.000826000 seconds time elapsed


[root@CentOS ~]# )`p': perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s
    bw  =  1.52 MB/sec
tcp_bw:
    bw  =  3.3 MB/sec
tcp_bw:
    bw  =  6.46 MB/sec
tcp_bw:
    bw  =  12.8 MB/sec
tcp_bw:
    bw  =  25 MB/sec
tcp_bw:
    bw  =  48.1 MB/sec
tcp_bw:
    bw  =  96.2 MB/sec
tcp_bw:
    bw  =  195 MB/sec
tcp_bw:
    bw  =  362 MB/sec
tcp_bw:
    bw  =  594 MB/sec
tcp_bw:
    bw  =  940 MB/sec
tcp_bw:
    bw  =  1.09 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.8 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.8 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66.1 us
tcp_lat:
    latency  =  67 us
tcp_lat:
    latency  =  71.2 us
tcp_lat:
    latency  =  78.2 us
tcp_lat:
    latency  =  102 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    66,238,681,114      instructions              #    0.94  insn per cycle           (75.13%)
           485,327      cs                                                          
    70,180,773,568      cycles                                                        (87.55%)
    36,135,450,695      L1-dcache-loads                                               (87.69%)
       474,886,773      L1-dcache-load-misses     #    1.31% of all L1-dcache hits    (87.47%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    27,716,348,561      L1-icache-loads                                               (87.34%)
     1,214,391,889      L1-icache-load-misses                                         (87.71%)
   <not supported>      dTLB-loads                                                  
       107,234,454      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.55%)
   <not supported>      iTLB-loads                                                  
        39,668,321      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.12%)

      64.423887680 seconds time elapsed

[root@CentOS ~]# history | grep qperf
  181  yum install qperf
  197  qperf
  218  qperf
  237  qperf
  248  qperf
  261  qperf
  272  qperf
  274   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  282   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  291   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  303   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  314   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  324   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  334   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  346   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  381  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  390  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  399  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  407  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  416  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  424  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  432  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  440  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  448  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  456  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  465  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  466  history | grep qperf
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf



qperf: Interrupt

 Performance counter stats for 'qperf':

    74,187,715,665      instructions              #    0.89  insn per cycle           (75.05%)
           586,078      cs                                                          
    83,224,774,965      cycles                                                        (87.60%)
    38,346,277,850      L1-dcache-loads                                               (87.48%)
       705,476,743      L1-dcache-load-misses     #    1.84% of all L1-dcache hits    (87.50%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    30,916,788,731      L1-icache-loads                                               (87.52%)
       851,757,976      L1-icache-load-misses                                         (87.49%)
   <not supported>      dTLB-loads                                                  
       141,122,646      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.44%)
   <not supported>      iTLB-loads                                                  
        11,374,198      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.56%)

      84.694008540 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           527,412      instructions              #    0.12  insn per cycle           (80.69%)
                 3      cs                                                          
         4,402,326      cycles                                                        (95.82%)
           483,149      L1-dcache-loads                                             
            20,495      L1-dcache-load-misses     #    4.24% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           535,036      L1-icache-loads                                             
            21,615      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             3,698      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
               866      iTLB-load-misses          #    0.00% of all iTLB cache hits   (58.77%)

       0.002815140 seconds time elapsed

[root@CentOS ~]# history | tail
  460  . p.sh 
  461  reboot
  462  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
  463  perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
  464  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
  465  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  466  history | grep qperf
  467  perf stat -d -d -e instructions,cs,cycles  qperf
  468  perf stat -d -d -e instructions,cs,cycles netserver
  469  history | tail
[root@CentOS ~]# ps -eLf | grep nets
root      4245     1  4245  0    1 09:34 ?        00:00:00 netserver
root      4250  4083  4250  0    1 09:36 ttyAMA0  00:00:00 grep --color=auto nets
[root@CentOS ~]# kill 4245
[root@CentOS ~]# kill -9 4245
-bash: kill: (4245) - No such process
[root@CentOS ~]# ps -eLf | grep nets
root      4268  4083  4268  0    1 09:36 ttyAMA0  00:00:00 grep --color=auto nets
12.11 -l 60S ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168. 
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.11 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.63   

 Performance counter stats for 'netperf -H 192.168.12.11 -l 60':

    31,837,319,470      instructions              #    0.94  insn per cycle           (75.51%)
            41,775      cs                                                          
    33,925,270,058      cycles                                                        (87.48%)
    19,378,175,245      L1-dcache-loads                                               (87.71%)
       594,762,177      L1-dcache-load-misses     #    3.07% of all L1-dcache hits    (87.58%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    11,257,394,429      L1-icache-loads                                               (87.20%)
       326,424,544      L1-icache-load-misses                                         (87.16%)
   <not supported>      dTLB-loads                                                  
        52,545,710      dTLB-load-misses          #    0.00% of all dTLB cache hits   (86.74%)
   <not supported>      iTLB-loads                                                  
         5,928,319      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.10%)

      60.010072860 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 


================================================================
2.1.1.1.1.1 est1-41:
 [root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
[root@CentOS ~]# [   5r': perf stat -d -d -e instructions,cs,cycles iperf -c 192.1
------------------------------------------------------------cycles iperf -c 192.16
Client connecting to 192.168.12.12, TCP port 5001ctions,cs,cycles iperf -c 192.16
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 44460 connected with 192.168.12.12 port 5001

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.40 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,141,068,740      instructions              #    0.90  insns per cycle          (74.75%)
            60,735      cs                                                          
    15,667,152,448      cycles                                                        (87.77%)
     8,622,497,121      L1-dcache-loads                                               (88.03%)
       351,165,183      L1-dcache-load-misses     #    4.07% of all L1-dcache hits    (88.17%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,792,774,704      L1-icache-loads                                               (87.51%)
       107,581,012      L1-icache-load-misses                                         (86.35%)
   <not supported>      dTLB-loads               
        25,937,216      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.75%)
   <not supported>      iTLB-loads               
         6,311,274      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.58%)

      30.037633980 seconds time elapsed

[root@CentOS ~]# 
2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 44462 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    14,229,750,964      instructions              #    0.95  insns per cycle          (75.42%)
            64,846      cs                                                          
    14,977,343,221      cycles                                                        (86.66%)
     8,683,776,218      L1-dcache-loads                                               (87.74%)
       347,642,175      L1-dcache-load-misses     #    4.00% of all L1-dcache hits    (88.74%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,876,134,495      L1-icache-loads                                               (88.51%)
       131,486,810      L1-icache-load-misses                                         (87.24%)
   <not supported>      dTLB-loads               
        29,302,716      dTLB-load-misses          #    0.00% of all dTLB cache hits   (86.01%)
   <not supported>      iTLB-loads               
         7,199,468      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.37%)

      30.032545060 seconds time elapsed

[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001 -d -d -e instructions,cs,cycles iperf -c 192.168
TCP window size:  448 KByte (WARNING: requested  256 KByte)ycles iperf -c 192.168
------------------------------------------------------------

[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 60462
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 60464
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    54,348,731,023      instructions              #    0.82  insns per cycle          (74.78%)
           872,266      cs                                                          
    66,207,558,848      cycles                                                        (87.84%)
    28,226,677,650      L1-dcache-loads                                               (87.16%)
     1,990,220,235      L1-dcache-load-misses     #    7.05% of all L1-dcache hits    (87.54%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    19,405,083,665      L1-icache-loads                                               (87.34%)
       875,308,149      L1-icache-load-misses                                         (87.82%)
   <not supported>      dTLB-loads               
       159,473,577      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.63%)
   <not supported>      iTLB-loads               
        52,014,294      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.82%)

     128.281432120 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:64k:*2 192.168.12.12 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s

    bw  =  1.63 MB/sec
tcp_bw:
    bw  =  3.16 MB/sec
tcp_bw:
    bw  =  6.56 MB/sec
tcp_bw:
    bw  =  13.1 MB/sec
tcp_bw:
    bw  =  24.8 MB/sec
tcp_bw:
    bw  =  49.4 MB/sec
tcp_bw:
    bw  =  91.7 MB/sec
tcp_bw:
    bw  =  193 MB/sec
tcp_bw:
    bw  =  353 MB/sec
tcp_bw:
    bw  =  514 MB/sec
tcp_bw:
    bw  =  672 MB/sec
tcp_bw:
    bw  =  832 MB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.17 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  65.7 us
tcp_lat:
    latency  =  66.2 us
tcp_lat:
    latency  =  70.4 us
tcp_lat:
    latency  =  80 us
tcp_lat:
    latency  =  104 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat':

    64,353,654,620      instructions              #    0.95  insns per cycle          (75.76%)
           485,246      cs                                                          
    68,098,282,652      cycles                                                        (88.03%)
    35,202,879,407      L1-dcache-loads                                               (87.23%)
       487,571,030      L1-dcache-load-misses     #    1.39% of all L1-dcache hits    (87.41%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    27,460,550,435      L1-icache-loads                                               (86.89%)
     1,202,137,026      L1-icache-load-misses                                         (88.16%)
   <not supported>      dTLB-loads               
       533,571,835      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.53%)
   <not supported>      iTLB-loads               
        27,913,516      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.01%)

      64.186168640 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
size:1:64k:*2 192.168.12.12 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s
[root@CentOS ~]# history | grep qperf
  182  yum install qperf
  200  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_lbw tcp_lat
  201  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  229  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  253  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  270  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  289  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  300  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  302  qperf
  310  qperf
  319  qperf
  330  qperf
  342  qperf
  353  qperf
  367  qperf
  376  qperf
  406  perf stat -d -d -e instructions,cs,cycles  qperf
  414  perf stat -d -d -e instructions,cs,cycles  qperf
  423  perf stat -d -d -e instructions,cs,cycles  qperf
  432  perf stat -d -d -e instructions,cs,cycles  qperf
  440  perf stat -d -d -e instructions,cs,cycles  qperf
  448  perf stat -d -d -e instructions,cs,cycles  qperf
  456  perf stat -d -d -e instructions,cs,cycles  qperf
  464  perf stat -d -d -e instructions,cs,cycles  qperf
  472  perf stat -d -d -e instructions,cs,cycles  qperf
  480  perf stat -d -d -e instructions,cs,cycles  qperf
  489  perf stat -d -d -e instructions,cs,cycles  qperf
  490  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  500  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat
  501  history | grep qperf
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    71,538,815,218      instructions              #    0.95  insns per cycle          (74.33%)
           685,316      cs                                                          
    75,588,273,760      cycles                                                        (87.01%)
    37,051,288,554      L1-dcache-loads                                               (87.67%)
       666,355,591      L1-dcache-load-misses     #    1.80% of all L1-dcache hits    (87.89%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    30,853,193,126      L1-icache-loads                                               (87.48%)
       863,388,001      L1-icache-load-misses                                         (87.44%)
   <not supported>      dTLB-loads               
       244,497,995      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.94%)
   <not supported>      iTLB-loads               
        36,804,295      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.57%)

     128.273701940 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
(reverse-i-search)`net': perf stat -d -d -e instructions,cs,cycles netserver
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.12 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.62   

 Performance counter stats for 'netperf -H 192.168.12.12 -l 60':

    33,814,144,356      instructions              #    0.91  insns per cycle          (74.87%)
            45,207      cs                                                          
    37,179,151,457      cycles                                                        (87.54%)
    20,309,910,921      L1-dcache-loads                                               (87.49%)
       811,897,056      L1-dcache-load-misses     #    4.00% of all L1-dcache hits    (87.40%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    12,414,102,530      L1-icache-loads                                               (87.87%)
       369,436,765      L1-icache-load-misses                                         (87.69%)
   <not supported>      dTLB-loads               
       148,458,069      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.30%)
   <not supported>      iTLB-loads               
        19,789,571      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.43%)

      60.010380800 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           677,032      instructions              #    0.13  insns per cycle          (87.62%)
                 3      cs                                                          
         5,202,999      cycles                                                      
           519,806      L1-dcache-loads                                             
            21,564      L1-dcache-load-misses     #    4.15% of all L1-dcache hits  
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
           754,756      L1-icache-loads                                             
            26,345      L1-icache-load-misses                                       
   <not supported>      dTLB-loads               
             5,985      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads               
             4,510      iTLB-load-misses          #    0.00% of all iTLB cache hits   (39.93%)

       0.032321600 seconds time elapsed

[root@CentOS ~]# 


================================================================
2.1.1.1.1.2 est42-87:
 [root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k6k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 44460
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec
[  5] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 44462
[  5]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    55,196,487,185      instructions              #    0.82  insn per cycle           (75.24%)
           840,402      cs                                                          
    67,563,294,446      cycles                                                        (87.61%)
    28,641,771,643      L1-dcache-loads                                               (86.71%)
     1,998,782,760      L1-dcache-load-misses     #    6.98% of all L1-dcache hits    (87.37%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    19,698,227,035      L1-icache-loads                                               (87.69%)
       864,461,160      L1-icache-load-misses                                         (87.68%)
   <not supported>      dTLB-loads                                                  
       160,017,904      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.59%)
   <not supported>      iTLB-loads                                                  
        46,516,865      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.83%)

     100.198341880 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------

 Performance counter stats for 'iperf -s -w 256k':

         1,977,893      instructions              #    0.50  insn per cycle         
                 5      cs                                                          
         3,952,735      cycles                                                      
           917,591      L1-dcache-loads                                             
            32,798      L1-dcache-load-misses     #    3.57% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
         1,155,434      L1-icache-loads                                             
            28,546      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
            10,588      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
             1,661      iTLB-load-misses          #    0.00% of all iTLB cache hits   (6.74%)

       2.827903140 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------ycles iperf -c 192.168.12.11 -P1 -i 1 -t 30
Client connecting to 192.168.12.11, TCP port 5001tions,cs,cycles iperf -s -w 256k
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 60462 connected with 192.168.12.11 port 5001

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,768,923,669      instructions              #    0.88  insn per cycle           (73.76%)
            56,985      cs                                                          
    16,859,430,201      cycles                                                        (87.21%)
     8,939,014,300      L1-dcache-loads                                               (87.75%)
       364,887,737      L1-dcache-load-misses     #    4.08% of all L1-dcache hits    (87.98%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     5,124,244,751      L1-icache-loads                                               (87.96%)
       165,710,000      L1-icache-load-misses                                         (87.53%)
   <not supported>      dTLB-loads                                                  
        33,925,947      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.46%)
   <not supported>      iTLB-loads                                                  
         8,594,646      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.72%)

      30.029119020 seconds time elapsed

[root@CentOS ~]# 
(reverse-i-search)`': 
1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 60464 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  1.0- 2.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  2.0- 3.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  3.0- 4.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  4.0- 5.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  5.0- 6.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  6.0- 7.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  7.0- 8.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3]  8.0- 9.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  9.0-10.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 10.0-11.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 11.0-12.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 12.0-13.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 13.0-14.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 14.0-15.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 15.0-16.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 16.0-17.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 17.0-18.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 18.0-19.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 19.0-20.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 20.0-21.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 21.0-22.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 22.0-23.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 23.0-24.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 24.0-25.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 25.0-26.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 26.0-27.0 sec  1.10 GBytes  9.41 Gbits/sec
[  3] 27.0-28.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 28.0-29.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3] 29.0-30.0 sec  1.10 GBytes  9.42 Gbits/sec
[  3]  0.0-30.0 sec  32.9 GBytes  9.41 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    14,415,194,997      instructions              #    0.94  insn per cycle           (74.86%)
            61,762      cs                                                          
    15,359,677,464      cycles                                                        (87.58%)
     8,795,563,803      L1-dcache-loads                                               (87.15%)
       337,541,722      L1-dcache-load-misses     #    3.84% of all L1-dcache hits    (88.27%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     4,989,395,138      L1-icache-loads                                               (87.58%)
       150,114,111      L1-icache-load-misses                                         (87.11%)
   <not supported>      dTLB-loads                                                  
        32,480,867      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.70%)
   <not supported>      iTLB-loads                                                  
         8,173,670      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.64%)

      30.029175820 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf


qperf: Interrupt

 Performance counter stats for 'qperf':

    72,085,393,613      instructions              #    0.96  insn per cycle           (74.84%)
           668,430      cs                                                          
    75,423,910,795      cycles                                                        (87.60%)
    37,696,950,674      L1-dcache-loads                                               (87.45%)
       699,336,069      L1-dcache-load-misses     #    1.86% of all L1-dcache hits    (87.30%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    31,221,622,370      L1-icache-loads                                               (87.53%)
       897,778,464      L1-icache-load-misses                                         (87.40%)
   <not supported>      dTLB-loads                                                  
       245,700,053      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.95%)
   <not supported>      iTLB-loads                                                  
        39,658,416      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.80%)

     104.696930160 seconds time elapsed

(reverse-i-search)`': 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:1:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg
    bw  =  1.66 MB/sec
tcp_bw:
    bw  =  3.33 MB/sec
tcp_bw:
    bw  =  6.69 MB/sec
tcp_bw:
    bw  =  13.5 MB/sec
tcp_bw:
    bw  =  26.9 MB/sec
tcp_bw:
    bw  =  49.9 MB/sec
tcp_bw:
    bw  =  99.1 MB/sec
tcp_bw:
    bw  =  191 MB/sec
tcp_bw:
    bw  =  352 MB/sec
tcp_bw:
    bw  =  508 MB/sec
tcp_bw:
    bw  =  831 MB/sec
tcp_bw:
    bw  =  758 MB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  65.8 us
tcp_lat:
    latency  =  66.3 us
tcp_lat:
    latency  =  68.6 us
tcp_lat:
    latency  =  80.3 us
tcp_lat:
    latency  =  91 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    66,058,072,027      instructions              #    0.97  insn per cycle           (74.99%)
           487,959      cs                                                          
    68,069,114,293      cycles                                                        (87.44%)
    36,110,602,979      L1-dcache-loads                                               (87.73%)
       500,541,380      L1-dcache-load-misses     #    1.39% of all L1-dcache hits    (87.29%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    27,685,245,787      L1-icache-loads                                               (87.33%)
       956,710,763      L1-icache-load-misses                                         (87.97%)
   <not supported>      dTLB-loads                                                  
       479,125,399      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.66%)
   <not supported>      iTLB-loads                                                  
        29,962,752      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.04%)

      64.182882260 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

         1,139,463      instructions              #    0.22  insn per cycle         
                 3      cs                                                          
         5,214,654      cycles                                                      
           508,563      L1-dcache-loads                                             
            21,047      L1-dcache-load-misses     #    4.14% of all L1-dcache hits  
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
           748,541      L1-icache-loads                                             
            26,033      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
             5,927      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
     <not counted>      iTLB-load-misses                                              (0.00%)

       0.002985020 seconds time elapsed

[root@CentOS ~]# ps -eLf | grep server
root      4185     1  4185  0    1 09:53 ?        00:00:00 netserver
root      4206  4046  4206  0    1 09:56 ttyAMA0  00:00:00 grep --color=auto server
[root@CentOS ~]# kill 4185
[root@CentOS ~]# ps -eLf | grep server
root      4208  4046  4208  0    1 09:56 ttyAMA0  00:00:00 grep --color=auto server
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.11 () port 0 AF_INET

Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.71   

 Performance counter stats for 'netperf -H 192.168.12.11 -l 60':

    34,119,150,930      instructions              #    0.90  insn per cycle           (74.51%)
            43,200      cs                                                          
    37,856,343,700      cycles                                                        (87.20%)
    20,449,934,924      L1-dcache-loads                                               (87.30%)
       834,593,640      L1-dcache-load-misses     #    4.08% of all L1-dcache hits    (87.73%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    12,573,424,958      L1-icache-loads                                               (87.68%)
       409,811,631      L1-icache-load-misses                                         (87.63%)
   <not supported>      dTLB-loads                                                  
       137,609,989      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.72%)
   <not supported>      iTLB-loads                                                  
        15,915,700      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.44%)

      60.010309180 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 

================================================================
4K page

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11 -P1 -i 1 -t 30

------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 52948 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  1.0- 2.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  2.0- 3.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  3.0- 4.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3]  4.0- 5.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3]  5.0- 6.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  6.0- 7.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  7.0- 8.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  8.0- 9.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3]  9.0-10.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3] 10.0-11.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3] 11.0-12.0 sec  1.09 GBytes  9.35 Gbits/sec
[  3] 12.0-13.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 13.0-14.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3] 14.0-15.0 sec  1.09 GBytes  9.33 Gbits/sec
[  3] 15.0-16.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 16.0-17.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 17.0-18.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 18.0-19.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 19.0-20.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 20.0-21.0 sec  1.09 GBytes  9.35 Gbits/sec
[  3] 21.0-22.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 22.0-23.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 23.0-24.0 sec  1.09 GBytes  9.35 Gbits/sec
[  3] 24.0-25.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 25.0-26.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3] 26.0-27.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 27.0-28.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 28.0-29.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3] 29.0-30.0 sec  1.09 GBytes  9.34 Gbits/sec
[  3]  0.0-30.0 sec  32.6 GBytes  9.34 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    13,517,201,611      instructions              #    0.88  insn per cycle           (74.76%)
            59,984      cs                                                          
    15,278,157,875      cycles                                                        (86.90%)
     8,378,608,538      L1-dcache-loads                                               (86.68%)
       313,947,106      L1-dcache-load-misses     #    3.75% of all L1-dcache hits    (87.16%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     4,551,867,264      L1-icache-loads                                               (87.79%)
       139,891,901      L1-icache-load-misses                                         (87.65%)
   <not supported>      dTLB-loads                                                  
        19,561,147      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.05%)
   <not supported>      iTLB-loads                                                  
         1,849,291      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.03%)

      30.030827240 seconds time elapsed

1 -P1 -i 1 -t 30 perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.11
------------------------------------------------------------
Client connecting to 192.168.12.11, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.12 port 52950 connected with 192.168.12.11 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  1.0- 2.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3]  2.0- 3.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3]  4.0- 5.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3]  5.0- 6.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3]  6.0- 7.0 sec  1.07 GBytes  9.21 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.23 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.25 Gbits/sec
[  3] 10.0-11.0 sec  1.07 GBytes  9.22 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 12.0-13.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 13.0-14.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 14.0-15.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 15.0-16.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 16.0-17.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 17.0-18.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 18.0-19.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 19.0-20.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 20.0-21.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 21.0-22.0 sec  1.07 GBytes  9.22 Gbits/sec
[  3] 22.0-23.0 sec  1.07 GBytes  9.21 Gbits/sec
[  3] 23.0-24.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 24.0-25.0 sec  1.07 GBytes  9.22 Gbits/sec
[  3] 25.0-26.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 26.0-27.0 sec  1.07 GBytes  9.15 Gbits/sec
[  3] 27.0-28.0 sec  1.07 GBytes  9.22 Gbits/sec
[  3] 28.0-29.0 sec  1.07 GBytes  9.23 Gbits/sec
[  3] 29.0-30.0 sec  1.07 GBytes  9.22 Gbits/sec
[  3]  0.0-30.0 sec  32.2 GBytes  9.23 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.11 -P1 -i 1 -t 30':

    13,316,798,006      instructions              #    0.87  insn per cycle           (76.30%)
            62,159      cs                                                          
    15,263,798,439      cycles                                                        (88.16%)
     8,267,115,624      L1-dcache-loads                                               (86.51%)
       311,762,897      L1-dcache-load-misses     #    3.77% of all L1-dcache hits    (87.69%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
     4,484,018,442      L1-icache-loads                                               (87.20%)
       138,272,631      L1-icache-load-misses                                         (87.94%)
   <not supported>      dTLB-loads                                                  
        19,092,618      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.90%)
   <not supported>      iTLB-loads                                                  
         2,097,836      iTLB-load-misses          #    0.00% of all iTLB cache hits   (86.48%)

      30.023374880 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)ycles iperf -c 192.168
------------------------------------------------------------
[  4] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 45158
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.5 GBytes  9.30 Gbits/sec
[  5] local 192.168.12.12 port 5001 connected with 192.168.12.11 port 45160
[  5]  0.0-30.0 sec  32.4 GBytes  9.29 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    82,990,450,547      instructions              #    0.72  insn per cycle           (74.74%)
           313,709      cs                                                          
   115,207,215,323      cycles                                                        (87.43%)
    41,823,197,219      L1-dcache-loads                                               (87.58%)
     2,290,455,421      L1-dcache-load-misses     #    5.48% of all L1-dcache hits    (87.55%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,697,998,006      L1-icache-loads                                               (87.63%)
       766,077,870      L1-icache-load-misses                                         (87.50%)
   <not supported>      dTLB-loads                                                  
       199,939,484      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.52%)
   <not supported>      iTLB-loads                                                  
         5,309,997      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.49%)

      75.951565220 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:1:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg

    bw  =  1.8 MB/sec
tcp_bw:

    bw  =  3.53 MB/sec
tcp_bw:
    bw  =  7.05 MB/sec
tcp_bw:
    bw  =  13.2 MB/sec
tcp_bw:
    bw  =  28.2 MB/sec
tcp_bw:
    bw  =  54.1 MB/sec
tcp_bw:
    bw  =  101 MB/sec
tcp_bw:
    bw  =  187 MB/sec
tcp_bw:
    bw  =  319 MB/sec
tcp_bw:
    bw  =  498 MB/sec
tcp_bw:
    bw  =  669 MB/sec
tcp_bw:
    bw  =  834 MB/sec
tcp_bw:
    bw  =  941 MB/sec
tcp_bw:
    bw  =  1.01 GB/sec
tcp_bw:
    bw  =  1.11 GB/sec
tcp_bw:
    bw  =  1.18 GB/sec
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  66.4 us
tcp_lat:
    latency  =  67.9 us
tcp_lat:
    latency  =  69.1 us
tcp_lat:
    latency  =  75.7 us
tcp_lat:
    latency  =  118 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

    67,254,587,638      instructions              #    1.02  insn per cycle           (75.05%)
           486,433      cs                                                          
    65,701,945,418      cycles                                                        (87.62%)
    36,613,999,874      L1-dcache-loads                                               (87.49%)
       446,326,554      L1-dcache-load-misses     #    1.22% of all L1-dcache hits    (87.41%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    28,331,567,297      L1-icache-loads                                               (87.64%)
       686,864,158      L1-icache-load-misses                                         (87.30%)
   <not supported>      dTLB-loads                                                  
       126,017,111      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.61%)
   <not supported>      iTLB-loads                                                  
         5,420,426      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.49%)

      64.432997360 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:entOS ~]#   ': perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_si
size:1:64k:*2 192.168.12.11 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg_s


qperf: Interrupt

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat':

         5,814,540      instructions              #    0.50  insn per cycle           (59.50%)
                 6      cs                                                          
        11,601,965      cycles                                                        (79.80%)
         1,815,623      L1-dcache-loads                                               (79.69%)
            92,584      L1-dcache-load-misses     #    5.10% of all L1-dcache hits    (79.69%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
         2,342,623      L1-icache-loads                                             
            33,733      L1-icache-load-misses                                       
   <not supported>      dTLB-loads                                                  
            86,499      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads                                                  
               707      iTLB-load-misses          #    0.00% of all iTLB cache hits   (89.27%)

       2.191048400 seconds time elapsed

invalid or unsupported event: 'instructions,cs,cyc'
Run 'perf list' for a list of valid events

 Usage: perf stat [<options>] [<command>]

    -e, --event <event>   event selector. use 'perf list' to list available events
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cyc
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cyc
[root@CentOS ~]# history | grep qperf
  181  yum install qperf
  197  qperf
  218  qperf
  237  qperf
  248  qperf
  261  qperf
  272  qperf
  274   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  282   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  291   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  303   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  314   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  324   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  334   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  346   qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  381  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  390  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  399  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  407  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  416  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  424  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  432  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  440  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  448  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  456  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  465  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  466  history | grep qperf
  467  perf stat -d -d -e instructions,cs,cycles  qperf
  482  perf stat -d -d -e instructions,cs,cycles  qperf
  483  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  495  perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:64k:*2 192.168.12.11 tcp_bw tcp_lat
  497  history | grep qperf
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf




qperf: Interrupt

 Performance counter stats for 'qperf':

    77,110,736,959      instructions              #    0.89  insn per cycle           (74.95%)
           503,391      cs                                                          
    86,814,075,133      cycles                                                        (87.45%)
    39,465,151,011      L1-dcache-loads                                               (87.51%)
       667,828,322      L1-dcache-load-misses     #    1.69% of all L1-dcache hits    (87.54%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    32,645,263,396      L1-icache-loads                                               (87.46%)
       881,080,034      L1-icache-load-misses                                         (87.55%)
   <not supported>      dTLB-loads                                                  
       154,744,394      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.55%)
   <not supported>      iTLB-loads                                                  
         5,226,358      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.49%)

      76.575274840 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles   netperf -H 192.168.1
MIGRATED TCP STREAM TEST from 0.0.0.0 (0.0.0.0) port 0 AF_INET to 192.168.12.11 () port 0 AF_INET


Recv   Send    Send                          
Socket Socket  Message  Elapsed              
Size   Size    Size     Time     Throughput  
bytes  bytes   bytes    secs.    10^6bits/sec  

 87380  16384  16384    60.00    9414.77   

 Performance counter stats for 'netperf -H 192.168.12.11 -l 60':

    31,555,669,132      instructions              #    0.97  insn per cycle           (74.90%)
            43,734      cs                                                          
    32,440,122,180      cycles                                                        (87.63%)
    19,285,961,432      L1-dcache-loads                                               (87.61%)
       562,590,264      L1-dcache-load-misses     #    2.92% of all L1-dcache hits    (87.51%)
   <not supported>      LLC-loads                                                   
   <not supported>      LLC-load-misses                                             
    11,172,026,500      L1-icache-loads                                               (87.55%)
       237,621,791      L1-icache-load-misses                                         (87.51%)
   <not supported>      dTLB-loads                                                  
        57,389,078      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.51%)
   <not supported>      iTLB-loads                                                  
         1,802,518      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.41%)

      60.010318500 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# scp fengchunsong@192.168.1.101:~/mkernel_estall_4k.tar.gz .
mkernel_estall_4k.tar.gz                      100%  675MB  61.4MB/s   00:11    
[root@CentOS ~]# 


[root@CentOS ~]#  perf stat -d -d -e instructions,cs,cycles iperf -s -w 256k
------------------------------------------------------------
Server listening on TCP port 5001
TCP window size:  448 KByte (WARNING: requested  256 KByte)
------------------------------------------------------------
[  4] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 52948
[ ID] Interval       Transfer     Bandwidth
[  4]  0.0-30.0 sec  32.6 GBytes  9.33 Gbits/sec
[  5] local 192.168.12.11 port 5001 connected with 192.168.12.12 port 52950
[  5]  0.0-30.0 sec  32.2 GBytes  9.23 Gbits/sec

 Performance counter stats for 'iperf -s -w 256k':

    84,895,066,570      instructions              #    0.72  insns per cycle          (74.98%)
           280,826      cs                                                          
   117,941,145,237      cycles                                                        (87.49%)
    42,738,905,347      L1-dcache-loads                                               (87.43%)
     2,294,770,731      L1-dcache-load-misses     #    5.37% of all L1-dcache hits    (87.50%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    29,316,828,473      L1-icache-loads                                               (87.60%)
       761,591,211      L1-icache-load-misses                                         (87.57%)
   <not supported>      dTLB-loads               
       195,331,803      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.45%)
   <not supported>      iTLB-loads               
         5,322,610      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.50%)

      77.199974220 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------ycles iperf -c 192.168.12.12 -P 1 -i 1 -t 30
Client connecting to 192.168.12.12, TCP port 5001ctions,cs,cycles iperf -s -w 256
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 45158 connected with 192.168.12.12 port 5001

[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  1.0- 2.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3]  2.0- 3.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  4.0- 5.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  5.0- 6.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3]  6.0- 7.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3] 10.0-11.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 12.0-13.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 13.0-14.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 14.0-15.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 15.0-16.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3] 16.0-17.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 17.0-18.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3] 18.0-19.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3] 19.0-20.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 20.0-21.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 21.0-22.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 22.0-23.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 23.0-24.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 24.0-25.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 25.0-26.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3] 26.0-27.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 27.0-28.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 28.0-29.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3] 29.0-30.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  0.0-30.0 sec  32.5 GBytes  9.30 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    13,478,201,143      instructions              #    0.87  insns per cycle          (72.28%)
            62,418      cs                                                          
    15,442,441,331      cycles                                                        (87.66%)
     8,348,789,964      L1-dcache-loads                                               (87.60%)
       311,464,819      L1-dcache-load-misses     #    3.73% of all L1-dcache hits    (88.45%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,534,803,375      L1-icache-loads                                               (88.00%)
       139,093,590      L1-icache-load-misses                                         (86.90%)
   <not supported>      dTLB-loads               
        18,428,014      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.51%)
   <not supported>      iTLB-loads               
         2,109,884      iTLB-load-misses          #    0.00% of all iTLB cache hits   (88.30%)

      30.032561940 seconds time elapsed

[root@CentOS ~]# 
2 -P 1 -i 1 -t 30perf stat -d -d -e instructions,cs,cycles iperf -c 192.168.12.12
------------------------------------------------------------
Client connecting to 192.168.12.12, TCP port 5001
TCP window size: 85.0 KByte (default)
------------------------------------------------------------
[  3] local 192.168.12.11 port 45160 connected with 192.168.12.12 port 5001
[ ID] Interval       Transfer     Bandwidth
[  3]  0.0- 1.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  1.0- 2.0 sec  1.09 GBytes  9.32 Gbits/sec
[  3]  2.0- 3.0 sec  1.08 GBytes  9.32 Gbits/sec
[  3]  3.0- 4.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  4.0- 5.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  5.0- 6.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  6.0- 7.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  7.0- 8.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  8.0- 9.0 sec  1.08 GBytes  9.31 Gbits/sec
[  3]  9.0-10.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 10.0-11.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 11.0-12.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 12.0-13.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 13.0-14.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 14.0-15.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 15.0-16.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 16.0-17.0 sec  1.08 GBytes  9.24 Gbits/sec
[  3] 17.0-18.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 18.0-19.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 19.0-20.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 20.0-21.0 sec  1.08 GBytes  9.29 Gbits/sec
[  3] 21.0-22.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 22.0-23.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 23.0-24.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 24.0-25.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 25.0-26.0 sec  1.08 GBytes  9.27 Gbits/sec
[  3] 26.0-27.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3] 27.0-28.0 sec  1.08 GBytes  9.28 Gbits/sec
[  3] 28.0-29.0 sec  1.08 GBytes  9.26 Gbits/sec
[  3] 29.0-30.0 sec  1.08 GBytes  9.30 Gbits/sec
[  3]  0.0-30.0 sec  32.4 GBytes  9.29 Gbits/sec

 Performance counter stats for 'iperf -c 192.168.12.12 -P 1 -i 1 -t 30':

    13,435,321,324      instructions              #    0.87  insns per cycle          (76.10%)
            62,357      cs                                                          
    15,454,131,122      cycles                                                        (88.54%)
     8,334,044,447      L1-dcache-loads                                               (86.66%)
       315,444,098      L1-dcache-load-misses     #    3.79% of all L1-dcache hits    (87.67%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
     4,522,104,665      L1-icache-loads                                               (86.95%)
       139,475,127      L1-icache-load-misses                                         (86.57%)
   <not supported>      dTLB-loads               
        19,342,492      dTLB-load-misses          #    0.00% of all dTLB cache hits   (88.76%)
   <not supported>      iTLB-loads               
         1,792,995      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.47%)

      30.024398840 seconds time elapsed

[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf
qperf: Interrupt

 Performance counter stats for 'qperf':

    77,425,844,907      instructions              #    0.91  insns per cycle          (74.91%)
           528,553      cs                                                          
    84,764,444,846      cycles                                                        (87.45%)
    39,781,015,525      L1-dcache-loads                                               (87.53%)
       669,391,192      L1-dcache-load-misses     #    1.68% of all L1-dcache hits    (87.55%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    32,574,284,687      L1-icache-loads                                               (87.46%)
       914,431,072      L1-icache-load-misses                                         (87.47%)
   <not supported>      dTLB-loads               
       150,682,293      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.60%)
   <not supported>      iTLB-loads               
         5,384,248      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.53%)

     102.746191300 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles  qperf -oo msg_size:1:
tcp_bw:1:64k:*2 192.168.12.12 tcp_bw tcp_latinstructions,cs,cycles  qperf -oo msg
    bw  =  1.73 MB/sec
tcp_bw:
    bw  =  3.59 MB/sec
tcp_bw:
    bw  =  7.13 MB/sec
tcp_bw:
    bw  =  13.9 MB/sec
tcp_bw:
    bw  =  27.6 MB/sec
tcp_bw:
    bw  =  54.3 MB/sec
tcp_bw:
    bw  =  104 MB/sec
tcp_bw:
    bw  =  187 MB/sec
tcp_bw:
    bw  =  318 MB/sec
tcp_bw:
    bw  =  465 MB/sec
tcp_bw:
    bw  =  658 MB/sec
tcp_bw:
    bw  =  825 MB/sec
tcp_bw:
    bw  =  965 MB/sec
tcp_bw:
    bw  =  1.01 GB/sec
tcp_bw:
    bw  =  1.09 GB/sec
tcp_bw:
    bw  =  925 MB/sec
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.5 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  27.7 us
tcp_lat:
    latency  =  27.6 us
tcp_lat:
    latency  =  66.3 us
tcp_lat:
    latency  =  67.6 us
tcp_lat:
    latency  =  69.6 us
tcp_lat:
    latency  =  76.5 us
tcp_lat:
    latency  =  108 us

 Performance counter stats for 'qperf -oo msg_size:1:64k:*2 192.168.12.12 tcp_bw tcp_lat':

    67,010,621,002      instructions              #    1.04  insns per cycle          (74.89%)
           486,785      cs                                                          
    64,602,637,831      cycles                                                        (87.55%)
    36,396,936,851      L1-dcache-loads                                               (87.55%)
       372,738,267      L1-dcache-load-misses     #    1.02% of all L1-dcache hits    (87.52%)
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
    28,173,662,793      L1-icache-loads                                               (87.52%)
       663,759,733      L1-icache-load-misses                                         (87.41%)
   <not supported>      dTLB-loads               
       118,584,963      dTLB-load-misses          #    0.00% of all dTLB cache hits   (87.58%)
   <not supported>      iTLB-loads               
         5,244,138      iTLB-load-misses          #    0.00% of all iTLB cache hits   (87.53%)

      64.378817280 seconds time elapsed

[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# 
[root@CentOS ~]# perf stat -d -d -e instructions,cs,cycles netserver
Starting netserver with host 'IN(6)ADDR_ANY' port '12865' and family AF_UNSPEC

 Performance counter stats for 'netserver':

           252,566      instructions              #    0.06  insns per cycle          (77.41%)
                 2      cs                                                          
         4,298,942      cycles                                                        (81.91%)
           498,493      L1-dcache-loads                                             
            24,249      L1-dcache-load-misses     #    4.86% of all L1-dcache hits  
   <not supported>      LLC-loads                
   <not supported>      LLC-load-misses          
           551,633      L1-icache-loads                                             
            23,042      L1-icache-load-misses                                       
   <not supported>      dTLB-loads               
             3,728      dTLB-load-misses          #    0.00% of all dTLB cache hits 
   <not supported>      iTLB-loads               
               872      iTLB-load-misses          #    0.00% of all iTLB cache hits   (70.32%)

       0.003208460 seconds time elapsed

[root@CentOS ~]# scp fengchunsong@192.168.1.101:~/mkernel_estall_4k.tar.gz .
mkernel_estall_4k.tar.gz                      100%  675MB  61.4MB/s   00:11    
[root@CentOS ~]# 

